import{i as j,o as v,n as N,K as m,w as y,y as e,b as n,H as u,q as w,h,f as C,p as $,J as S,m as k}from"./index-8e3c4911.js";import{z as I}from"./Helmet-d9a99439-17d17245-80416325.js";import{o as P}from"./arrow-left-31a92935-5b9af42a-b9eb07e5.js";import{d as q}from"./utensils-crossed-8251ba29-3d1f84c7-60fb7034.js";import{d as z}from"./bed-double-0906a1cb-dc63bf7a-3f207685.js";import{t as L}from"./shirt-3c4181b9-6f1496dd-9b94e2f9.js";import{o as M}from"./pill-926d8fcb-40569885-5dca1407.js";import{p as R}from"./pencil-b145156d-81e39600-5a684db5.js";import{t as H}from"./wheat-00299e0b-9ea22a5b-d17d43e0.js";import{e as A}from"./shopping-cart-8aca5ef3-095b1616-112594bf.js";import{e as D}from"./sprout-8c216a34-39352dac-e85c37a0.js";import{p as E}from"./package-99b0a55c-785e5cf1-bac652b0.js";const X=()=>{const t=j(),{user:a,loading:c}=v(),{toast:x}=N(),[o,l]=m.useState(null),[g,d]=m.useState(!0);m.useEffect(()=>{(async()=>{if(!c){if(!a){d(!1),l(null);return}d(!0);try{const{data:s,error:r}=await y.from("stores").select("category").eq("owner_id",a.id).single();l(s?s.category:null)}catch(s){console.error("Error fetching store category",s),l(null)}finally{d(!1)}}})()},[a,c]);const f=async s=>{if(a&&o){const r=s.toLowerCase(),i=o.toLowerCase();if(!(r===i||i.includes(r)||r.includes(i))){x({variant:"destructive",title:"Acceso Restringido",description:`Tienes una sesión activa como negocio tipo "${o}". No puedes acceder al módulo de "${s}".`});return}t("/tienda/dashboard");return}t(`/tienda/registro?service=${s}`)},b=[{name:"Restaurante",icon:q,description:"Platos y bebidas a domicilio."},{name:"Hotel",icon:z,description:"Gestión de reservas y habitaciones."},{name:"Ropa",icon:L,description:"Tiendas de moda y accesorios."},{name:"Farmacia",icon:M,description:"Medicamentos y productos de salud."},{name:"Papelería",icon:R,description:"Suministros de oficina y escolares."},{name:"Panadería",icon:H,description:"Pan, pasteles y postres."},{name:"Supermercado",icon:A,description:"Comestibles y productos para el hogar."},{name:"Cultivador",icon:D,description:"Productos frescos de la granja."},{name:"General",icon:E,description:"Cualquier otro tipo de negocio."}];if(c||g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50/50 dark:bg-gray-900/50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});const p=b.filter(s=>{if(!a||!o)return!0;const r=s.name.toLowerCase(),i=o.toLowerCase();return r===i||i.includes(r)||r.includes(i)});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative pt-20",children:[e.jsxs(I,{children:[e.jsx("title",{children:"Selección de Servicio | MiOriente"}),e.jsx("meta",{name:"description",content:"Selecciona el tipo de servicio para registrar tu negocio en MiOriente."})]}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(n,{variant:"outline",size:"icon",asChild:!0,className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow",children:e.jsxs(u,{to:"/",children:[e.jsx(w,{className:"h-5 w-5 text-gray-800"}),e.jsx("span",{className:"sr-only",children:"Volver al Inicio"})]})})}),a&&e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx(n,{asChild:!0,className:"shadow-lg",children:e.jsx(u,{to:"/tienda/dashboard",children:"Ir a Mi Cuenta"})})}),e.jsxs(h,{className:"w-full max-w-4xl shadow-2xl rounded-xl bg-white/95 backdrop-blur border-none",children:[e.jsxs(C,{className:"text-center pb-2",children:[e.jsx($,{className:"text-3xl font-extrabold text-slate-900",children:a&&o?`Bienvenido, ${o}`:"Registro de Negocio"}),e.jsx(S,{className:"text-slate-600 mt-2 text-lg",children:a&&o?"Accede a tu panel de control o gestiona tu cuenta.":"Selecciona el tipo de servicio que ofrece tu negocio."})]}),e.jsxs(k,{className:"p-8",children:[p.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:p.map((s,r)=>e.jsxs(h,{className:"flex flex-col items-center text-center p-6 cursor-pointer hover:shadow-xl hover:scale-105 transition-all duration-300 border-slate-200 bg-white group",onClick:()=>f(s.name),children:[e.jsx("div",{className:"p-4 rounded-full bg-primary/10 group-hover:bg-primary/20 transition-colors mb-4 text-primary",children:e.jsx(s.icon,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500",children:s.description})]},r))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No se encontraron servicios disponibles para tu categoría."}),e.jsx(n,{variant:"link",onClick:()=>t("/tienda/dashboard"),children:"Ir al Dashboard"})]}),e.jsx("div",{className:"mt-10 text-center",children:e.jsxs(n,{variant:"outline",onClick:()=>t(-1),className:"border-slate-300 text-slate-700 hover:bg-slate-100",children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," Volver"]})})]})]})]})};export{X as default};
