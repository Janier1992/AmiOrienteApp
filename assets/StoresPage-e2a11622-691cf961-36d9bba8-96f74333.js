import{k as b,f as r,d as y,y as e,m as N,w as i,i as k,T as w,Z as v,L,l as C,N as M,g as q,a as A,j as T}from"./index-bea51c07.js";import{K as z}from"./Helmet-d9a99439-17d17245-80416325-0a82370e.js";import{a as S}from"./input-977568de-bea10295-4adb3258-368f21ef.js";import{d as g}from"./badge-34bdff7c-b2c90fce-efd43af8-f7a84e83.js";import"./tabs-60a3e460-388ba4b9-0edee604-4ea2a7bb.js";import{a as j,o as _}from"./sample-data-be06332b-5d91aeff-5d91aeff-5d91aeff.js";import{o as $}from"./search-566f00ed-c3babbf0-ad60b5b7-3e645f27.js";import{s as B}from"./star-228904cf-a4a173ca-0fd05dd1-af89d176.js";import{e as E}from"./map-pin-4396fd6c-98f8e615-be2face5-18973d83.js";import{l as F}from"./clock-0a32af33-121834d9-4cd0de5d-d758c7ab.js";import{p as O}from"./phone-970a33d0-a31adfe8-11805b3b-a61aa034.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],I=b("funnel",D),P=({title:a,description:t,showBack:h=!1,action:o,className:l})=>{const m=L();return e.jsxs("div",{className:C("flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6",l),children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>m(-1),className:"h-8 w-8 -ml-2",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:a})]}),t&&e.jsx("p",{className:"text-muted-foreground",children:t})]}),o&&e.jsx("div",{className:"flex items-center gap-2",children:o})]})},R=({store:a})=>e.jsx(w.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxs(N,{className:"h-full flex flex-col hover:shadow-xl transition-all duration-300 group overflow-hidden border-slate-200",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:a.image_url||a.logo_url||"https://images.unsplash.com/photo-1556740758-90de2742e1e2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:a.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(g,{className:"bg-white/90 text-slate-800 hover:bg-white shadow-sm backdrop-blur-sm",children:[e.jsx(B,{className:"w-3 h-3 text-yellow-500 fill-yellow-500 mr-1"}),a.rating||4.5]})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx(g,{variant:"secondary",className:"shadow-sm backdrop-blur-sm opacity-90",children:a.category})})]}),e.jsx(q,{className:"p-4 pb-2",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("h3",{className:"font-bold text-lg line-clamp-1 group-hover:text-primary transition-colors",children:a.name})})}),e.jsxs(A,{className:"p-4 pt-0 flex-grow",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 h-10",children:a.description}),e.jsxs("div",{className:"space-y-1.5 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:a.address||"Marinilla, Antioquia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:a.hours||"8:00 AM - 8:00 PM"})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:a.phone})]})]}),a.tags&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:a.tags.slice(0,2).map(t=>e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full",children:t},t))})]}),e.jsx(T,{className:"p-4 pt-0 mt-auto border-t border-slate-100 bg-slate-50/50",children:e.jsxs(i,{className:"w-full mt-3 bg-white text-primary border border-primary hover:bg-primary hover:text-white transition-colors",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Ver Productos"]})})]})}),ee=()=>{const[a,t]=r.useState([]),[h,o]=r.useState(!0),[l,m]=r.useState(""),[c,p]=r.useState("Todos");r.useEffect(()=>{(async()=>{o(!0);try{const{data:s,error:n}=await y.from("stores").select("*").order("created_at",{ascending:!1});if(n)throw n;const d=[...s||[],...j],f=Array.from(new Map(d.map(x=>[x.id,x])).values());t(f)}catch(s){console.error("Error fetching stores, using sample data:",s),t(j)}finally{o(!1)}})()},[]);const u=r.useMemo(()=>a.filter(s=>{var n,d;const f=s.name.toLowerCase().includes(l.toLowerCase())||((n=s.description)==null?void 0:n.toLowerCase().includes(l.toLowerCase()))||((d=s.address)==null?void 0:d.toLowerCase().includes(l.toLowerCase())),x=c==="Todos"||s.category===c;return f&&x}),[a,l,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx("title",{children:"Servicios y Negocios | MiOriente"}),e.jsx("meta",{name:"description",content:"Encuentra los mejores restaurantes, tiendas y servicios en Marinilla y el Oriente Antioqueño."})]}),e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[e.jsx(P,{title:"Directorio de Servicios",description:"Lo que necesitas, cuando lo necesitas. Apoya el comercio local.",backgroundImage:"https://images.unsplash.com/photo-1556742502-ec7c0e9f34b1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10",children:e.jsx(N,{className:"p-4 shadow-lg border-none bg-white/95 backdrop-blur",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-grow w-full",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(S,{placeholder:"Buscar restaurantes, farmacias, tiendas...",className:"pl-9 bg-slate-50 border-slate-200",value:l,onChange:s=>m(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[e.jsx(i,{variant:c==="Todos"?"default":"outline",size:"sm",onClick:()=>p("Todos"),className:"whitespace-nowrap",children:"Todos"}),_.map(s=>e.jsx(i,{variant:c===s?"default":"outline",size:"sm",onClick:()=>p(s),className:"whitespace-nowrap",children:s},s))]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-80 bg-slate-200 rounded-xl animate-pulse"},s))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[u.length," Resultados"]}),e.jsxs(i,{variant:"ghost",size:"sm",className:"text-slate-500",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Más Filtros"]})]}),e.jsx(k,{mode:"popLayout",children:u.length>0?e.jsx(w.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(s=>e.jsx(R,{store:s},s.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx(v,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No encontramos lo que buscas"}),e.jsx("p",{className:"text-slate-500",children:"Intenta cambiar los términos de búsqueda o la categoría."}),e.jsx(i,{variant:"link",onClick:()=>{m(""),p("Todos")},className:"mt-2",children:"Limpiar filtros"})]})})]})})]})]})};export{ee as default};
