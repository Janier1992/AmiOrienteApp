import{b as N,y as e,d as c,f as x,h as m,p,Y as b,G as w,l as j,B as $,E as S}from"./index-4834c6e1.js";import{u as k}from"./useStoreDashboard-6cfa5bdd-a014cfe4.js";import{L}from"./index-6c60542e-1f0cc56c.js";import{a as E}from"./settings-96af137d-f461a4db.js";import{t as C}from"./package-99b0a55c-785e5cf1.js";import{n as P}from"./trending-up-147c55bb-4628ab85.js";import"./triangle-alert-5ea4272b-316ec065.js";const z=({data:a,categories:l,index:n,valueFormatter:o,className:u})=>{const[r,f]=N.useState(null);if(!a||a.length===0)return e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-400",children:"Sin datos"});const i=Math.max(...a.map(s=>s[l[0]]))||1,d=a.map((s,t)=>{const y=t/(a.length-1)*100,v=100-s[l[0]]/i*100;return{x:y,y:v,data:s}}),h=d.map((s,t)=>`${t===0?"M":"L"} ${s.x} ${s.y}`).join(" "),g=`${h} L 100 100 L 0 100 Z`;return e.jsxs("div",{className:j("w-full h-full relative select-none",u),children:[e.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none z-0 px-4 pb-6 pt-4",children:[100,75,50,25,0].map((s,t)=>e.jsx("div",{className:"w-full border-t border-dashed border-border h-0 relative",children:e.jsx("span",{className:"absolute -top-3 -left-0 text-[10px] text-muted-foreground bg-background pr-1",children:o?o(i*s/100):i*s/100})},t))}),e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible z-10 relative",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--primary)",stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:"var(--primary)",stopOpacity:"0"})]})}),e.jsx("path",{d:g,fill:"url(#gradient)",stroke:"none"}),e.jsx("path",{d:h,fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"0.5",vectorEffect:"non-scaling-stroke",className:"drop-shadow-sm"}),d.map((s,t)=>e.jsxs("g",{children:[e.jsx("circle",{cx:s.x,cy:s.y,r:"4",fill:"transparent",className:"cursor-pointer hover:r-6 transition-all",onMouseEnter:()=>f({...s,index:t}),onMouseLeave:()=>f(null)}),e.jsx("circle",{cx:s.x,cy:s.y,r:"1.5",className:j("fill-background stroke-[0.5] transition-all duration-200",(r==null?void 0:r.index)===t?"stroke-primary r-2 fill-primary":"stroke-primary"),pointerEvents:"none"})]},t))]}),e.jsx($,{children:r&&e.jsx(S.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},className:"absolute z-50 pointer-events-none",style:{left:`${r.x}%`,top:`${r.y}%`,transform:"translate(-50%, -120%)"},children:e.jsxs("div",{className:"bg-popover border text-popover-foreground text-xs rounded-lg shadow-xl p-3 min-w-[120px] -translate-y-full -translate-x-1/2",children:[e.jsx("p",{className:"font-semibold mb-1",children:r.data[n]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-muted-foreground",children:"Valor:"}),e.jsx("span",{className:"font-bold font-mono",children:o?o(r.data[l[0]]):r.data[l[0]]})]})]})})}),e.jsx("div",{className:"flex justify-between mt-2 text-[10px] text-muted-foreground px-0",children:a.map((s,t)=>e.jsx("span",{className:"truncate w-8 text-center",children:s[n]},t))})]})},F=({storeId:a})=>{const{stats:l,fetchStats:n,isLoadingStats:o}=k();if(N.useEffect(()=>{a&&n(a)},[a,n]),o&&!l)return e.jsx(L,{text:"Actualizando métricas...",className:"h-64"});const{total_sales:u=0,total_orders:r=0,total_products:f=0,platform_commission:i=0,monthlyIncome:d=[]}=l||{};return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{id:"dashboard-stats-cards",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Ventas Totales"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",Number(u).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+20.1% desde el mes pasado"})]})]}),e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Pedidos Completados"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pedidos históricos"})]})]}),e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Inventario Activo"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Productos en stock"})]})]}),e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Comisión Plataforma"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-500",children:["-$",Number(i).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Soy del Campo (0% comisión)"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs(c,{className:"col-span-1",children:[e.jsxs(x,{children:[e.jsx(m,{children:"Ingresos por Periodo"}),e.jsx(w,{children:"Resumen mensual de ventas."})]}),e.jsx(p,{className:"pl-2",children:e.jsx(z,{data:d.length>0?d:[{month:"Hoy",total:0}],index:"month",categories:["total"],valueFormatter:h=>`$${Number(h).toLocaleString()}`})})]})})]})};export{F as default};
