import{r as g,j as e,h as u,A as v,m as w,c as C}from"./index-e56a20f4.js";import{C as d,a as x,b as m,c as p,d as S}from"./card-5b190897.js";import{useStoreDashboard as k}from"./useStoreDashboard-777d05d6.js";import{L}from"./index-3d9af196.js";import{D as $}from"./settings-4bb697f6.js";import{P}from"./package-d0bb7069.js";import{T as D}from"./trending-up-4dedfd83.js";import"./triangle-alert-d065fd3e.js";const E=({data:r,categories:l,index:o,valueFormatter:n,className:j})=>{const[t,f]=g.useState(null);if(!r||r.length===0)return e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-400",children:"Sin datos"});const i=Math.max(...r.map(s=>s[l[0]]))||1,c=r.map((s,a)=>{const y=a/(r.length-1)*100,b=100-s[l[0]]/i*100;return{x:y,y:b,data:s}}),h=c.map((s,a)=>`${a===0?"M":"L"} ${s.x} ${s.y}`).join(" "),N=`${h} L 100 100 L 0 100 Z`;return e.jsxs("div",{className:u("w-full h-full relative select-none",j),children:[e.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none z-0 px-4 pb-6 pt-4",children:[100,75,50,25,0].map((s,a)=>e.jsx("div",{className:"w-full border-t border-dashed border-border h-0 relative",children:e.jsx("span",{className:"absolute -top-3 -left-0 text-[10px] text-muted-foreground bg-background pr-1",children:n?n(i*s/100):i*s/100})},a))}),e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible z-10 relative",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--primary)",stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:"var(--primary)",stopOpacity:"0"})]})}),e.jsx("path",{d:N,fill:"url(#gradient)",stroke:"none"}),e.jsx("path",{d:h,fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"0.5",vectorEffect:"non-scaling-stroke",className:"drop-shadow-sm"}),c.map((s,a)=>e.jsxs("g",{children:[e.jsx("circle",{cx:s.x,cy:s.y,r:"4",fill:"transparent",className:"cursor-pointer hover:r-6 transition-all",onMouseEnter:()=>f({...s,index:a}),onMouseLeave:()=>f(null)}),e.jsx("circle",{cx:s.x,cy:s.y,r:"1.5",className:u("fill-background stroke-[0.5] transition-all duration-200",(t==null?void 0:t.index)===a?"stroke-primary r-2 fill-primary":"stroke-primary"),pointerEvents:"none"})]},a))]}),e.jsx(v,{children:t&&e.jsx(w.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},className:"absolute z-50 pointer-events-none",style:{left:`${t.x}%`,top:`${t.y}%`,transform:"translate(-50%, -120%)"},children:e.jsxs("div",{className:"bg-popover border text-popover-foreground text-xs rounded-lg shadow-xl p-3 min-w-[120px] -translate-y-full -translate-x-1/2",children:[e.jsx("p",{className:"font-semibold mb-1",children:t.data[o]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-muted-foreground",children:"Valor:"}),e.jsx("span",{className:"font-bold font-mono",children:n?n(t.data[l[0]]):t.data[l[0]]})]})]})})}),e.jsx("div",{className:"flex justify-between mt-2 text-[10px] text-muted-foreground px-0",children:r.map((s,a)=>e.jsx("span",{className:"truncate w-8 text-center",children:s[o]},a))})]})},V=({storeId:r})=>{const{stats:l,fetchStats:o,isLoadingStats:n}=k();if(g.useEffect(()=>{r&&o(r)},[r,o]),n&&!l)return e.jsx(L,{text:"Actualizando métricas...",className:"h-64"});const{total_sales:j=0,total_orders:t=0,total_products:f=0,platform_commission:i=0,monthlyIncome:c=[]}=l||{};return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Ventas Totales"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",Number(j).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+20.1% desde el mes pasado"})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Pedidos Completados"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pedidos históricos"})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Inventario Activo"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Productos en stock"})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Comisión Plataforma"}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-500",children:["-$",Number(i).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Soy del Campo (0% comisión)"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs(d,{className:"col-span-1",children:[e.jsxs(x,{children:[e.jsx(m,{children:"Ingresos por Periodo"}),e.jsx(S,{children:"Resumen mensual de ventas."})]}),e.jsx(p,{className:"pl-2",children:e.jsx(E,{data:c.length>0?c:[{month:"Hoy",total:0}],index:"month",categories:["total"],valueFormatter:h=>`$${Number(h).toLocaleString()}`})})]})})]})};export{V as default};
