import{E as P,A as ce,K as O,X as q,t as A,u as I,v as F,_ as U,k as G,y as e,f as o,x as m,m as re,F as ie,Z as ae,n as le,I as de,T as oe,W as ne,J as me,B as se,a as xe,d as ue,N as w}from"./index-87ab05f1.js";import{E as pe,G as he}from"./BaseStoreDashboard-9ad5c13e-d7a1a933-4e4e637d-e46edf80-92fa8562.js";import{a as p}from"./input-977568de-bea10295-4adb3258-368f21ef-dd0395aa.js";import{$ as fe,T as je,H as be,D as ge,_ as Z}from"./select-03f52418-c5111b6c-af5e7482-637f31c9-c1fa3325.js";import{u as E}from"./label-6ced007b-31f64b09-71156226-1e4e75c4-8af8544c.js";import{l as ye}from"./textarea-03a75c76-69040bf5-35a9782e-8e0ca7dd-b23a1c90.js";import{u as Y}from"./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db-4123484f-ad5d382b.js";import{o as te}from"./search-566f00ed-c3babbf0-ad60b5b7-3e645f27-67335d64.js";import{k as ve}from"./pencil-b145156d-81e39600-5a684db5-7834b695-6280cdd5.js";import{f as Ne}from"./scroll-area-d0c9b1aa-5d11dc0b-4a9e3f1e-c4827a88-a3cd7b48.js";import{d as we}from"./badge-34bdff7c-b2c90fce-efd43af8-f7a84e83-2020d777.js";import{e as X}from"./shopping-cart-8aca5ef3-095b1616-112594bf-3a6e2763-072beeee.js";import{y as ke}from"./credit-card-bcc8ac59-e0a7eb79-9e00e665-407b30eb-fd4bd701.js";import{m as Ce}from"./circle-x-27d4e477-36967287-d1c6dd24-20fb8d85-c3392906.js";import{F as Se,E as _e}from"./StoreCustomersTab-ce620322-3ebc43ae-d65f30bd-3e3d1ad2-1f973f81.js";import{m as Te}from"./withStoreCategory-9d4d279e-93acff39-035aaa52-9e0cb912-b41159d7.js";import{p as Ee}from"./package-99b0a55c-785e5cf1-bac652b0-c1d00408-aa7462ee.js";import{t as Pe}from"./upload-8259cec2-21216fe4-eb25a68c-1da87379-90ddbf9a.js";import{c as $e,o as Me}from"./settings-96af137d-f461a4db-8933cd88-d7585a9f-df6ebdcf.js";import{r as ee}from"./users-93d0d9a2-82ed9403-42cfbbc5-b53a716c-9b48157b.js";import"./Helmet-d9a99439-17d17245-80416325-0a82370e-5a6bde15.js";import"./log-out-1de3e3ee-53ee1d6f-be22ed5f-31659d2d-18bff071.js";import"./index-6c60542e-1f0cc56c-a6179bc2-c5eb0dfa-9596aa86.js";import"./triangle-alert-5ea4272b-316ec065-d63fb5c5-7c95de1a-02bb8d63.js";import"./check-78166ef5-9630779a-ee565adf-12fad7f6-47c88872.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Le=P("banknote",De);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ze=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Oe=P("file-image",ze);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Ae=P("folder-open",qe);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Fe=P("grid-3x3",Ie);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ue=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ve=P("list",Ue);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ke=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],Be=P("package-open",Ke);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const He=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],W=P("printer",He),Ge=({product:s,onEdit:u,onDelete:i})=>{var r,l;const t=s.sku||((l=(r=s.description)==null?void 0:r.match(/SKU:\s*([^\n]+)/))==null?void 0:l[1])||"N/A";return e.jsxs(xe,{className:"rounded-3xl overflow-hidden border-none shadow-sm hover:shadow-md transition-shadow group bg-white h-full flex flex-col",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100 p-4 flex items-center justify-center",children:[s.discount>0&&e.jsxs("span",{className:"absolute top-4 right-4 bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full z-10",children:["-",s.discount,"%"]}),s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"max-h-full max-w-full object-contain mix-blend-multiply"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[e.jsx(Oe,{className:"h-10 w-10 mb-2"}),e.jsx("span",{className:"text-xs",children:"Sin imagen"})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-20",children:[e.jsx(m,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-md bg-white hover:bg-gray-100",onClick:n=>{n.stopPropagation(),u(s)},children:e.jsx(ve,{className:"h-4 w-4 text-blue-600"})}),e.jsx(m,{variant:"destructive",size:"icon",className:"h-8 w-8 rounded-full shadow-md",onClick:n=>{n.stopPropagation(),i(s.id)},children:e.jsx(se,{className:"h-4 w-4"})})]})]}),e.jsxs(ue,{className:"p-4 flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsx("h3",{className:"font-bold text-slate-900 line-clamp-2 text-md leading-tight",children:s.name})}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Papelería • SKU: ",t]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"text-lg font-bold text-slate-900",children:["$",Number(s.price).toLocaleString()]}),s.discount>0&&e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["$",(s.price*(1+s.discount/100)).toLocaleString()]})]})]})]})},Re=()=>{const{products:s,fetchProducts:u,addProduct:i,updateProduct:r,deleteProduct:l,store:t}=Y(),[n,$]=o.useState("grid"),[b,f]=o.useState(""),[R,M]=o.useState(!1),[D,k]=o.useState(!1),[C,S]=o.useState(null),[d,y]=o.useState({name:"",price:"",description:"",stock:"1",category:"Office",sku:"",image_url:""}),[L,_]=o.useState(null);o.useEffect(()=>{t!=null&&t.id&&u(t.id)},[t==null?void 0:t.id,u]);const z=s.filter(c=>c.name.toLowerCase().includes(b.toLowerCase())),V=()=>{S(null),y({name:"",price:"",description:"",stock:"1",category:"Office",sku:"",image_url:""}),_(null),M(!0)},K=c=>{var x,j;S(c);const h=c.sku||((j=(x=c.description)==null?void 0:x.match(/SKU:\s*([^\n]+)/))==null?void 0:j[1])||"",N=c.description?c.description.replace(/\n\nSKU:\s*[^\n]+/,""):"";y({name:c.name,price:c.price,description:N,stock:c.stock,category:c.category||"Office",sku:h,image_url:c.image_url||""}),_(null),M(!0)},v=c=>{const{name:x,value:j}=c.target;y(h=>({...h,[x]:j}))},B=c=>{c.target.files&&c.target.files[0]&&_(c.target.files[0])},g=async(c,x,j)=>{const{error:h,data:N}=await G.storage.from(x).upload(j,c);if(h)throw new Error(`Error al subir archivo: ${h.message}`);const{data:a}=G.storage.from(x).getPublicUrl(N.path);return a.publicUrl},Q=async c=>{c.preventDefault(),k(!0);try{let x=d.image_url;if(L&&t!=null&&t.id){const N=L.name.replace(/[^a-zA-Z0-9.]/g,"_"),a=`${t.id}/${Date.now()}_${N}`;x=await g(L,"product-images",a)}const j=d.sku?`${d.description||""}

SKU: ${d.sku}`:d.description,h={name:d.name,price:parseFloat(d.price),stock:parseInt(d.stock),product_type:"physical",requires_shipping:!0,image_url:x,description:j,store_id:t==null?void 0:t.id};C?(await r(C.id,h),w({title:"Producto actualizado",description:"Los cambios se han guardado."})):(await i(h),w({title:"Producto creado",description:"El producto se ha añadido correctamente."})),M(!1),S(null),y({name:"",price:"",description:"",stock:"1",category:"Office",sku:"",image_url:""}),_(null)}catch(x){console.error(x),w({title:"Error",description:x.message||"Error al guardar producto",variant:"destructive"})}finally{k(!1)}},J=async c=>{if(window.confirm("¿Seguro que deseas eliminar este producto?"))try{await l(c),w({title:"Producto eliminado"})}catch{w({title:"Error",description:"No se pudo eliminar.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-slate-900",children:"Inventario de Productos"}),e.jsx("p",{className:"text-gray-500",children:"Gestiona tu catálogo, precios y descuentos activos."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-2 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(p,{placeholder:"Buscar por nombre, SKU o categoría...",className:"pl-10 bg-gray-50 border-transparent focus:bg-white transition-colors",value:b,onChange:c=>f(c.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs(fe,{defaultValue:"all",children:[e.jsx(je,{className:"w-[130px] rounded-full bg-gray-50 border-transparent",children:e.jsx(be,{placeholder:"Categoría"})}),e.jsxs(ge,{children:[e.jsx(Z,{value:"all",children:"Categoría"}),e.jsx(Z,{value:"office",children:"Oficina"}),e.jsx(Z,{value:"school",children:"Escolar"})]})]}),e.jsxs("div",{className:"flex bg-gray-50 rounded-full p-1 border border-gray-100",children:[e.jsx(m,{variant:"ghost",size:"icon",className:`rounded-full h-8 w-8 ${n==="grid"?"bg-white shadow-sm":""}`,onClick:()=>$("grid"),children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",className:`rounded-full h-8 w-8 ${n==="list"?"bg-white shadow-sm":""}`,onClick:()=>$("list"),children:e.jsx(Ve,{className:"h-4 w-4"})})]})]}),e.jsxs(re,{open:R,onOpenChange:M,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(m,{className:"bg-black text-white hover:bg-gray-800 rounded-full px-6",onClick:V,children:[e.jsx(ae,{className:"h-4 w-4 mr-2"})," Añadir Producto"]})}),e.jsxs(le,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsx(de,{children:e.jsx(oe,{children:C?"Editar Producto":"Agregar Nuevo Producto"})}),e.jsxs("form",{onSubmit:Q,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"name",children:"Nombre del Producto"}),e.jsx(p,{id:"name",name:"name",required:!0,value:d.name,onChange:v,placeholder:"Ej: Cuaderno Norma"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"price",children:"Precio"}),e.jsx(p,{id:"price",name:"price",type:"number",required:!0,value:d.price,onChange:v,placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"stock",children:"Stock"}),e.jsx(p,{id:"stock",name:"stock",type:"number",required:!0,value:d.stock,onChange:v})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"category",children:"Categoría"}),e.jsx(p,{id:"category",name:"category",value:d.category,onChange:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"sku",children:"SKU (Opcional)"}),e.jsx(p,{id:"sku",name:"sku",value:d.sku,onChange:v,placeholder:"COD-001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"image_upload",children:"Imagen"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[d.image_url&&e.jsx("img",{src:d.image_url,alt:"Preview",className:"h-10 w-10 object-cover rounded border"}),e.jsx(p,{id:"image_upload",type:"file",accept:"image/*",onChange:B})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"description",children:"Descripción"}),e.jsx(ye,{id:"description",name:"description",value:d.description,onChange:v,rows:3})]}),e.jsx(m,{type:"submit",className:"w-full bg-yellow-400 text-black hover:bg-yellow-500 font-bold",disabled:D,children:D?e.jsx(ne,{className:"h-4 w-4 animate-spin"}):C?"Guardar Cambios":"Guardar Producto"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[z.map(c=>e.jsx("div",{className:"relative group h-full",children:e.jsx(Ge,{product:{...c,discount:0},onEdit:K,onDelete:J})},c.id)),z.length===0&&e.jsx("div",{className:"col-span-full py-12 text-center text-gray-400",children:"No se encontraron productos. Añade uno nuevo para empezar."})]})]})},Qe={async createPOSTransaction(s){const{orderPayload:u,items:i}=s,{data:r,error:l}=await G.from("orders").insert(u).select().single();if(l)throw l;for(const t of i){const n=Math.max(0,t.stock-t.qty);await G.from("products").update({stock:n}).eq("id",t.id)}return r}},Je=ce((s,u)=>({cart:[],isLoadingCheckout:!1,addToCart:i=>{const r=u().cart,l=r.find(t=>t.id===i.id);if(l){if(l.qty>=i.stock)return!1;s({cart:r.map(t=>t.id===i.id?{...t,qty:t.qty+1}:t)})}else s({cart:[...r,{...i,qty:1}]});return!0},removeFromCart:i=>{s(r=>({cart:r.cart.filter(l=>l.id!==i)}))},updateCartQty:(i,r)=>{s(l=>({cart:l.cart.map(t=>{if(t.id===i){const n=Math.max(1,t.qty+r);return r>0&&n>t.stock?t:{...t,qty:n}}return t})}))},clearCart:()=>s({cart:[]}),processCheckout:async(i,r,l,t)=>{const n=u().cart;if(n.length===0)return;const $=typeof r=="object"?{name:r.name,doc_id:r.docId,phone:r.phone,email:r.email,method:l,type:"POS"}:{name:r,method:l,type:"POS"};s({isLoadingCheckout:!0});try{const b={store_id:i,customer_id:null,status:"Entregado",total:t,delivery_address:JSON.stringify({guest:$,items:n.map(f=>({id:f.id,name:f.name,qty:f.qty,price:f.price}))})};return await Qe.createPOSTransaction({orderPayload:b,items:n}),u().clearCart(),Y.getState().fetchProducts(i,!0),!0}catch(b){throw b}finally{s({isLoadingCheckout:!1})}}})),Ze=()=>{const{products:s,fetchProducts:u,store:i}=Y(),{cart:r,addToCart:l,removeFromCart:t,updateCartQty:n,processCheckout:$,isLoadingCheckout:b}=Je(),[f,R]=o.useState(""),[M,D]=o.useState(!1),[k,C]=o.useState("Efectivo"),[S,d]=o.useState(""),[y,L]=o.useState(""),[_,z]=o.useState(""),[V,K]=o.useState(""),[v,B]=o.useState(!1),[g,Q]=o.useState(null);o.useEffect(()=>{i!=null&&i.id&&u(i.id)},[i==null?void 0:i.id]);const{subtotal:J,total:c,itemCount:x}=o.useMemo(()=>{const a=r.reduce((T,H)=>T+H.price*H.qty,0);return{subtotal:a,total:a,itemCount:r.reduce((T,H)=>T+H.qty,0)}},[r]),j=a=>{l(a)||w({title:"Stock insuficiente",variant:"destructive"})},h=async()=>{try{if(!S||!y){w({title:"Datos incompletos",description:"Nombre y Documento son obligatorios",variant:"destructive"});return}const a={name:S,docId:y,phone:_,email:V},T={customer:a,total:c,paymentMethod:k,items:[...r]};await $(i.id,a,k,c),Q(T),B(!0),D(!1),d(""),L(""),z(""),K("")}catch(a){console.error(a),w({title:"Error en venta",description:a.message,variant:"destructive"})}},N=s.filter(a=>a.name.toLowerCase().includes(f.toLowerCase())||a.sku&&a.sku.includes(f));return e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-140px)] gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-slate-50 border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-white border-b flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(p,{placeholder:"Buscar productos (Nombre, SKU)...",className:"pl-9 bg-gray-100 border-none",value:f,onChange:a=>R(a.target.value),autoFocus:!0})]})}),e.jsxs(Ne,{className:"flex-1 p-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:N.map(a=>e.jsxs("div",{className:`
                                    group relative bg-white border rounded-xl p-3 shadow-sm hover:shadow-md transition-all cursor-pointer select-none
                                    ${a.stock<=0?"opacity-50 grayscale":"hover:border-yellow-400"}
                                `,onClick:()=>a.stock>0&&j(a),children:[e.jsx("div",{className:"h-24 bg-gray-100 rounded-lg mb-2 flex items-center justify-center overflow-hidden",children:a.image_url?e.jsx("img",{src:a.image_url,alt:"",className:"w-full h-full object-cover"}):e.jsx(Be,{className:"text-gray-300 h-8 w-8"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold text-sm leading-tight line-clamp-2 min-h-[2.5em]",children:a.name}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-gray-600 font-mono",children:[a.stock," un."]}),e.jsxs("span",{className:"font-bold text-slate-900 text-sm",children:["$",Number(a.price).toLocaleString()]})]})]}),a.stock<=0&&e.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded",children:"Agotado"})})]},a.id))}),N.length===0&&e.jsx("div",{className:"text-center py-10 text-gray-400",children:"No se encontraron productos"})]})]}),e.jsxs("div",{className:"w-full lg:w-[400px] bg-white border rounded-xl flex flex-col shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b bg-yellow-400/10 flex items-center justify-between",children:[e.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-yellow-600"}),"Ticket de Venta"]}),e.jsxs(we,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[x," Ítems"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[r.map(a=>e.jsxs("div",{className:"flex gap-3 items-center p-2 rounded-lg hover:bg-slate-50 border border-transparent hover:border-slate-100 group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",Number(a.price).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 rounded-lg p-1",children:[e.jsx(m,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>n(a.id,-1),children:e.jsx(me,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-sm font-mono",children:a.qty}),e.jsx(m,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>n(a.id,1),children:e.jsx(ae,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-right min-w-[60px]",children:e.jsxs("p",{className:"font-bold text-sm text-slate-700",children:["$",(a.price*a.qty).toLocaleString()]})}),e.jsx(m,{size:"icon",variant:"ghost",className:"h-6 w-6 text-red-400 opacity-0 group-hover:opacity-100 hover:text-red-600",onClick:()=>t(a.id),children:e.jsx(se,{className:"h-3 w-3"})})]},a.id)),r.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-2",children:[e.jsx(X,{className:"h-12 w-12 opacity-20"}),e.jsx("p",{className:"text-sm",children:"Ticket vacío"}),e.jsx("p",{className:"text-xs text-gray-300 px-8 text-center",children:"Selecciona productos del inventario para iniciar una venta."})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",J.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900 pt-2 border-t border-dashed border-gray-300",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",c.toLocaleString()]})]})]}),M?e.jsxs("div",{className:"space-y-3 animate-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(p,{placeholder:"Nombre Cliente *",value:S,onChange:a=>d(a.target.value),className:"bg-white col-span-2"}),e.jsx(p,{placeholder:"Documento (C.C/NIT) *",value:y,onChange:a=>L(a.target.value),className:"bg-white"}),e.jsx(p,{placeholder:"Teléfono",value:_,onChange:a=>z(a.target.value),className:"bg-white"}),e.jsx(p,{placeholder:"Correo Electrónico (Para factura)",value:V,onChange:a=>K(a.target.value),className:"bg-white col-span-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(m,{variant:k==="Efectivo"?"default":"outline",onClick:()=>C("Efectivo"),className:"w-full justify-start gap-2",children:[e.jsx(Le,{className:"h-4 w-4"})," Efectivo"]}),e.jsxs(m,{variant:k==="Tarjeta"?"default":"outline",onClick:()=>C("Tarjeta"),className:"w-full justify-start gap-2",children:[e.jsx(ke,{className:"h-4 w-4"})," Tarjeta"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",className:"flex-1",onClick:()=>D(!1),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"})," Cancelar"]}),e.jsxs(m,{className:"flex-[2] bg-green-600 hover:bg-green-700",onClick:h,disabled:b,children:[e.jsx(W,{className:"h-4 w-4 mr-2"})," ",b?"Procesando...":"Confirmar Venta"]})]})]}):e.jsx(m,{className:"w-full bg-slate-900 hover:bg-slate-800 text-white h-12 text-lg font-bold shadow-md",disabled:r.length===0,onClick:()=>D(!0),children:"Cobrar"})]})]}),v&&g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"bg-green-600 p-4 text-white text-center",children:[e.jsx("div",{className:"mx-auto bg-white/20 w-12 h-12 rounded-full flex items-center justify-center mb-2",children:e.jsx(W,{className:"h-6 w-6"})}),e.jsx("h2",{className:"text-xl font-bold",children:"¡Venta Exitosa!"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Factura generada correctamente"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center space-y-1 pb-4 border-b",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Pagado"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-800",children:["$",g.total.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Método: ",g.paymentMethod]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Cliente:"}),e.jsx("span",{className:"font-medium",children:g.customer.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Documento:"}),e.jsx("span",{className:"font-medium",children:g.customer.docId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Email:"}),e.jsx("span",{className:"font-medium",children:g.customer.email||"N/A"})]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-xs space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-500 mb-2",children:"Resumen de productos:"}),g.items.map((a,T)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[a.qty,"x ",a.name]}),e.jsxs("span",{children:["$",(a.price*a.qty).toLocaleString()]})]},T))]}),e.jsxs("div",{className:"pt-2 gap-3 flex",children:[e.jsx(m,{variant:"outline",className:"flex-1",onClick:()=>B(!1),children:"Cerrar"}),e.jsxs(m,{className:"flex-1",onClick:()=>window.print(),children:[e.jsx(W,{className:"h-4 w-4 mr-2"})," Imprimir"]})]})]})]})})]})},We=O.lazy(()=>q(()=>A(()=>I(()=>F(()=>U(()=>import("./OverviewTab-a01a807a-07dd1735-5ada0bfc-c4caa4a6-82fd39ae.js"),["./OverviewTab-a01a807a-07dd1735-5ada0bfc-c4caa4a6-82fd39ae.js","./index-87ab05f1.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db-4123484f-ad5d382b.js","./index-6c60542e-1f0cc56c-a6179bc2-c5eb0dfa-9596aa86.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5-7c95de1a-02bb8d63.js","./settings-96af137d-f461a4db-8933cd88-d7585a9f-df6ebdcf.js","./package-99b0a55c-785e5cf1-bac652b0-c1d00408-aa7462ee.js","./trending-up-147c55bb-4628ab85-e3b835f1-1f811d81-76ad9897.js"],import.meta.url),["./OverviewTab-a01a807a-07dd1735-5ada0bfc-c4caa4a6.js","./index-bea51c07.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db-4123484f.js","./index-6c60542e-1f0cc56c-a6179bc2-c5eb0dfa.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5-7c95de1a.js","./settings-96af137d-f461a4db-8933cd88-d7585a9f.js","./package-99b0a55c-785e5cf1-bac652b0-c1d00408.js","./trending-up-147c55bb-4628ab85-e3b835f1-1f811d81.js"],import.meta.url),["./OverviewTab-a01a807a-07dd1735-5ada0bfc.js","./index-8e3c4911.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db.js","./index-6c60542e-1f0cc56c-a6179bc2.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5.js","./settings-96af137d-f461a4db-8933cd88.js","./package-99b0a55c-785e5cf1-bac652b0.js","./trending-up-147c55bb-4628ab85-e3b835f1.js"],import.meta.url),["./OverviewTab-a01a807a-07dd1735.js","./index-4834c6e1.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4.js","./index-6c60542e-1f0cc56c.js","./triangle-alert-5ea4272b-316ec065.js","./settings-96af137d-f461a4db.js","./package-99b0a55c-785e5cf1.js","./trending-up-147c55bb-4628ab85.js"],import.meta.url),["./OverviewTab-a01a807a.js","./index-3101bb07.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd.js","./index-6c60542e.js","./triangle-alert-5ea4272b.js","./settings-96af137d.js","./package-99b0a55c.js","./trending-up-147c55bb.js"],import.meta.url)),Xe=O.lazy(()=>q(()=>A(()=>I(()=>F(()=>U(()=>import("./OrdersManagementTab-74307886-48065a75-18a01665-f134e541-ee33a121.js"),["./OrdersManagementTab-74307886-48065a75-18a01665-f134e541-ee33a121.js","./index-87ab05f1.js","./index-dc19931e.css","./badge-34bdff7c-b2c90fce-efd43af8-f7a84e83-2020d777.js","./select-03f52418-c5111b6c-af5e7482-637f31c9-c1fa3325.js","./check-78166ef5-9630779a-ee565adf-12fad7f6-47c88872.js","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db-4123484f-ad5d382b.js","./index-6c60542e-1f0cc56c-a6179bc2-c5eb0dfa-9596aa86.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5-7c95de1a-02bb8d63.js","./package-99b0a55c-785e5cf1-bac652b0-c1d00408-aa7462ee.js","./clock-0a32af33-121834d9-4cd0de5d-d758c7ab-1bf2afff.js","./truck-a0071c63-090d128d-9cfc595e-b33772c3-de5cb612.js","./pencil-b145156d-81e39600-5a684db5-7834b695-6280cdd5.js","./map-pin-4396fd6c-98f8e615-be2face5-18973d83-0f5a17cb.js"],import.meta.url),["./OrdersManagementTab-74307886-48065a75-18a01665-f134e541.js","./index-bea51c07.js","./index-dc19931e.css","./badge-34bdff7c-b2c90fce-efd43af8-f7a84e83.js","./select-03f52418-c5111b6c-af5e7482-637f31c9.js","./check-78166ef5-9630779a-ee565adf-12fad7f6.js","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db-4123484f.js","./index-6c60542e-1f0cc56c-a6179bc2-c5eb0dfa.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5-7c95de1a.js","./package-99b0a55c-785e5cf1-bac652b0-c1d00408.js","./clock-0a32af33-121834d9-4cd0de5d-d758c7ab.js","./truck-a0071c63-090d128d-9cfc595e-b33772c3.js","./pencil-b145156d-81e39600-5a684db5-7834b695.js","./map-pin-4396fd6c-98f8e615-be2face5-18973d83.js"],import.meta.url),["./OrdersManagementTab-74307886-48065a75-18a01665.js","./index-8e3c4911.js","./index-dc19931e.css","./badge-34bdff7c-b2c90fce-efd43af8.js","./select-03f52418-c5111b6c-af5e7482.js","./check-78166ef5-9630779a-ee565adf.js","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db.js","./index-6c60542e-1f0cc56c-a6179bc2.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5.js","./package-99b0a55c-785e5cf1-bac652b0.js","./clock-0a32af33-121834d9-4cd0de5d.js","./truck-a0071c63-090d128d-9cfc595e.js","./pencil-b145156d-81e39600-5a684db5.js","./map-pin-4396fd6c-98f8e615-be2face5.js"],import.meta.url),["./OrdersManagementTab-74307886-48065a75.js","./index-4834c6e1.js","./index-dc19931e.css","./badge-34bdff7c-b2c90fce.js","./select-03f52418-c5111b6c.js","./check-78166ef5-9630779a.js","./useStoreDashboard-6cfa5bdd-a014cfe4.js","./index-6c60542e-1f0cc56c.js","./triangle-alert-5ea4272b-316ec065.js","./package-99b0a55c-785e5cf1.js","./clock-0a32af33-121834d9.js","./truck-a0071c63-090d128d.js","./pencil-b145156d-81e39600.js","./map-pin-4396fd6c-98f8e615.js"],import.meta.url),["./OrdersManagementTab-74307886.js","./index-3101bb07.js","./index-dc19931e.css","./badge-34bdff7c.js","./select-03f52418.js","./check-78166ef5.js","./useStoreDashboard-6cfa5bdd.js","./index-6c60542e.js","./triangle-alert-5ea4272b.js","./package-99b0a55c.js","./clock-0a32af33.js","./truck-a0071c63.js","./pencil-b145156d.js","./map-pin-4396fd6c.js"],import.meta.url)),Ye=O.lazy(()=>q(()=>A(()=>I(()=>F(()=>U(()=>import("./AdminTab-1ef2bbd0-38fe81f3-dd6c0adf-0124de59-ea200bc2.js"),["./AdminTab-1ef2bbd0-38fe81f3-dd6c0adf-0124de59-ea200bc2.js","./index-87ab05f1.js","./index-dc19931e.css","./user-plus-74362f50-3e37ce73-40475d04-0b128926-0d3181b2.js","./users-93d0d9a2-82ed9403-42cfbbc5-b53a716c-9b48157b.js"],import.meta.url),["./AdminTab-1ef2bbd0-38fe81f3-dd6c0adf-0124de59.js","./index-bea51c07.js","./index-dc19931e.css","./user-plus-74362f50-3e37ce73-40475d04-0b128926.js","./users-93d0d9a2-82ed9403-42cfbbc5-b53a716c.js"],import.meta.url),["./AdminTab-1ef2bbd0-38fe81f3-dd6c0adf.js","./index-8e3c4911.js","./index-dc19931e.css","./user-plus-74362f50-3e37ce73-40475d04.js","./users-93d0d9a2-82ed9403-42cfbbc5.js"],import.meta.url),["./AdminTab-1ef2bbd0-38fe81f3.js","./index-4834c6e1.js","./index-dc19931e.css","./user-plus-74362f50-3e37ce73.js","./users-93d0d9a2-82ed9403.js"],import.meta.url),["./AdminTab-1ef2bbd0.js","./index-3101bb07.js","./index-dc19931e.css","./user-plus-74362f50.js","./users-93d0d9a2.js"],import.meta.url)),ea=O.lazy(()=>q(()=>A(()=>I(()=>F(()=>U(()=>import("./BulkUploadTab-0fe3efc4-824a62de-987b67e9-4bcf2828-9a124cc2.js"),["./BulkUploadTab-0fe3efc4-824a62de-987b67e9-4bcf2828-9a124cc2.js","./index-87ab05f1.js","./index-dc19931e.css","./upload-8259cec2-21216fe4-eb25a68c-1da87379-90ddbf9a.js","./circle-alert-58769497-aeae36dd-aab7d564-c8980787-32b03cc8.js"],import.meta.url),["./BulkUploadTab-0fe3efc4-824a62de-987b67e9-4bcf2828.js","./index-bea51c07.js","./index-dc19931e.css","./upload-8259cec2-21216fe4-eb25a68c-1da87379.js","./circle-alert-58769497-aeae36dd-aab7d564-c8980787.js"],import.meta.url),["./BulkUploadTab-0fe3efc4-824a62de-987b67e9.js","./index-8e3c4911.js","./index-dc19931e.css","./upload-8259cec2-21216fe4-eb25a68c.js","./circle-alert-58769497-aeae36dd-aab7d564.js"],import.meta.url),["./BulkUploadTab-0fe3efc4-824a62de.js","./index-4834c6e1.js","./index-dc19931e.css","./upload-8259cec2-21216fe4.js","./circle-alert-58769497-aeae36dd.js"],import.meta.url).then(s=>s.a),["./BulkUploadTab-0fe3efc4.js","./index-3101bb07.js","./index-dc19931e.css","./upload-8259cec2.js","./circle-alert-58769497.js"],import.meta.url)),aa=O.lazy(()=>q(()=>A(()=>I(()=>F(()=>U(()=>import("./FinancialsTab-e07ef4f8-cb7c3ea0-71aba4e2-cf3d1041-f4dca4a9.js"),["./FinancialsTab-e07ef4f8-cb7c3ea0-71aba4e2-cf3d1041-f4dca4a9.js","./index-87ab05f1.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db-4123484f-ad5d382b.js","./index-6c60542e-1f0cc56c-a6179bc2-c5eb0dfa-9596aa86.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5-7c95de1a-02bb8d63.js","./settings-96af137d-f461a4db-8933cd88-d7585a9f-df6ebdcf.js","./trending-up-147c55bb-4628ab85-e3b835f1-1f811d81-76ad9897.js","./credit-card-bcc8ac59-e0a7eb79-9e00e665-407b30eb-fd4bd701.js","./circle-alert-58769497-aeae36dd-aab7d564-c8980787-32b03cc8.js"],import.meta.url),["./FinancialsTab-e07ef4f8-cb7c3ea0-71aba4e2-cf3d1041.js","./index-bea51c07.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db-4123484f.js","./index-6c60542e-1f0cc56c-a6179bc2-c5eb0dfa.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5-7c95de1a.js","./settings-96af137d-f461a4db-8933cd88-d7585a9f.js","./trending-up-147c55bb-4628ab85-e3b835f1-1f811d81.js","./credit-card-bcc8ac59-e0a7eb79-9e00e665-407b30eb.js","./circle-alert-58769497-aeae36dd-aab7d564-c8980787.js"],import.meta.url),["./FinancialsTab-e07ef4f8-cb7c3ea0-71aba4e2.js","./index-8e3c4911.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db.js","./index-6c60542e-1f0cc56c-a6179bc2.js","./triangle-alert-5ea4272b-316ec065-d63fb5c5.js","./settings-96af137d-f461a4db-8933cd88.js","./trending-up-147c55bb-4628ab85-e3b835f1.js","./credit-card-bcc8ac59-e0a7eb79-9e00e665.js","./circle-alert-58769497-aeae36dd-aab7d564.js"],import.meta.url),["./FinancialsTab-e07ef4f8-cb7c3ea0.js","./index-4834c6e1.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd-a014cfe4.js","./index-6c60542e-1f0cc56c.js","./triangle-alert-5ea4272b-316ec065.js","./settings-96af137d-f461a4db.js","./trending-up-147c55bb-4628ab85.js","./credit-card-bcc8ac59-e0a7eb79.js","./circle-alert-58769497-aeae36dd.js"],import.meta.url),["./FinancialsTab-e07ef4f8.js","./index-3101bb07.js","./index-dc19931e.css","./useStoreDashboard-6cfa5bdd.js","./index-6c60542e.js","./triangle-alert-5ea4272b.js","./settings-96af137d.js","./trending-up-147c55bb.js","./credit-card-bcc8ac59.js","./circle-alert-58769497.js"],import.meta.url)),sa=({store:s})=>{const u=[{path:"",label:"Resumen",icon:pe,element:e.jsx(We,{storeId:s.id})},{path:"caja",label:"Caja / Ventas",icon:X,element:e.jsx(Ze,{})},{path:"pedidos",label:"Historial Pedidos",icon:Ee,element:e.jsx(Xe,{storeId:s.id})},{path:"productos",label:"Inventario",icon:Ae,element:e.jsx(Re,{})},{path:"importar",label:"Importar",icon:Pe,element:e.jsx(ea,{storeId:s.id})},{path:"finanzas",label:"Finanzas",icon:$e,element:e.jsx(aa,{storeId:s.id})},{path:"equipo",label:"Equipo",icon:ee,element:e.jsx(Ye,{storeId:s.id})},{path:"clientes",label:"Clientes",icon:ee,element:e.jsx(Se,{})},{path:"configuracion",label:"Configuración",icon:Me,element:e.jsx(_e,{})}];return e.jsx(he,{store:s,tabs:u,title:"Papelería Admin"})},Ta=Te(sa,["Papelería","Papeleria"]);export{Ta as default};
