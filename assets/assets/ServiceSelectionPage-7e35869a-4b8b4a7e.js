import{c as j,D as v,n as N,s as m,w as y,y as e,x as n,z as u,r as w,d as x,f as C,h as S,G as $,p as k}from"./index-2ce94096.js";import{G as z}from"./Helmet-c26e192a-711588c7.js";import{r as G}from"./arrow-left-15196fcd-4539f4d9.js";import{a as P}from"./utensils-crossed-d46d12ac-c44f5654.js";import{o as q}from"./bed-double-890a1b05-b28b7936.js";import{c as D}from"./shirt-7d77b204-10da42e2.js";import{l as L}from"./pill-3e84f193-d51c0d39.js";import{c as M}from"./pencil-fe5409bf-721c7957.js";import{h as R}from"./wheat-369bc175-61bf434d.js";import{r as E}from"./shopping-cart-539ff770-43b9593e.js";import{e as I}from"./sprout-b4b56098-f812f934.js";import{t as A}from"./package-8a53cd5c-b574c2fa.js";const W=()=>{const t=j(),{user:a,loading:c}=v(),{toast:h}=N(),[i,l]=m.useState(null),[g,d]=m.useState(!0);m.useEffect(()=>{(async()=>{if(!c){if(!a){d(!1),l(null);return}d(!0);try{const{data:s,error:r}=await y.from("stores").select("category").eq("owner_id",a.id).single();l(s?s.category:null)}catch(s){console.error("Error fetching store category",s),l(null)}finally{d(!1)}}})()},[a,c]);const f=async s=>{if(a&&i){const r=s.toLowerCase(),o=i.toLowerCase();if(!(r===o||o.includes(r)||r.includes(o))){h({variant:"destructive",title:"Acceso Restringido",description:`Tienes una sesión activa como negocio tipo "${i}". No puedes acceder al módulo de "${s}".`});return}t("/tienda/dashboard");return}t(`/tienda/registro?service=${s}`)},b=[{name:"Restaurante",icon:P,description:"Platos y bebidas a domicilio."},{name:"Hotel",icon:q,description:"Gestión de reservas y habitaciones."},{name:"Ropa",icon:D,description:"Tiendas de moda y accesorios."},{name:"Farmacia",icon:L,description:"Medicamentos y productos de salud."},{name:"Papelería",icon:M,description:"Suministros de oficina y escolares."},{name:"Panadería",icon:R,description:"Pan, pasteles y postres."},{name:"Supermercado",icon:E,description:"Comestibles y productos para el hogar."},{name:"Cultivador",icon:I,description:"Productos frescos de la granja."},{name:"General",icon:A,description:"Cualquier otro tipo de negocio."}];if(c||g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50/50 dark:bg-gray-900/50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});const p=b.filter(s=>{if(!a||!i)return!0;const r=s.name.toLowerCase(),o=i.toLowerCase();return r===o||o.includes(r)||r.includes(o)});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative pt-20",children:[e.jsxs(z,{children:[e.jsx("title",{children:"Selección de Servicio | MiOriente"}),e.jsx("meta",{name:"description",content:"Selecciona el tipo de servicio para registrar tu negocio en MiOriente."})]}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(n,{variant:"outline",size:"icon",asChild:!0,className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow",children:e.jsxs(u,{to:"/",children:[e.jsx(w,{className:"h-5 w-5 text-gray-800"}),e.jsx("span",{className:"sr-only",children:"Volver al Inicio"})]})})}),a&&e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx(n,{asChild:!0,className:"shadow-lg",children:e.jsx(u,{to:"/tienda/dashboard",children:"Ir a Mi Cuenta"})})}),e.jsxs(x,{className:"w-full max-w-4xl shadow-2xl rounded-xl bg-white/95 backdrop-blur border-none",children:[e.jsxs(C,{className:"text-center pb-2",children:[e.jsx(S,{className:"text-3xl font-extrabold text-slate-900",children:a&&i?`Bienvenido, ${i}`:"Registro de Negocio"}),e.jsx($,{className:"text-slate-600 mt-2 text-lg",children:a&&i?"Accede a tu panel de control o gestiona tu cuenta.":"Selecciona el tipo de servicio que ofrece tu negocio."})]}),e.jsxs(k,{className:"p-8",children:[p.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:p.map((s,r)=>e.jsxs(x,{className:"flex flex-col items-center text-center p-6 cursor-pointer hover:shadow-xl hover:scale-105 transition-all duration-300 border-slate-200 bg-white group",onClick:()=>f(s.name),children:[e.jsx("div",{className:"p-4 rounded-full bg-primary/10 group-hover:bg-primary/20 transition-colors mb-4 text-primary",children:e.jsx(s.icon,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500",children:s.description})]},r))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No se encontraron servicios disponibles para tu categoría."}),e.jsx(n,{variant:"link",onClick:()=>t("/tienda/dashboard"),children:"Ir al Dashboard"})]}),e.jsx("div",{className:"mt-10 text-center",children:e.jsxs(n,{variant:"outline",onClick:()=>t(-1),className:"border-slate-300 text-slate-700 hover:bg-slate-100",children:[e.jsx(G,{className:"mr-2 h-4 w-4"})," Volver"]})})]})]})]})};export{W as default};
