import{l as y,n as S,j as e,o as C,B as o,p as k,r as l,C as w,A as L,m as b,g as v,a as A,c as E,q as M,k as T}from"./index-9083a265.js";import{H as q}from"./Helmet-a3f46ffc.js";import{I as P}from"./input-f40b5322.js";import{B as j}from"./badge-29da9c44.js";import"./tabs-e454222b.js";import{S as I,a as N}from"./sample-data-be06332b.js";import{S as _}from"./search-d5f724c4.js";import{S as z}from"./star-f6f9589a.js";import{M as B}from"./map-pin-9a40b828.js";import{C as F}from"./clock-b1ebfb45.js";import{P as H}from"./phone-50494dd2.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],O=y("funnel",R),V=({title:s,description:t,showBack:p=!1,action:i,className:r})=>{const m=S();return e.jsxs("div",{className:C("flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6",r),children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p&&e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m(-1),className:"h-8 w-8 -ml-2",children:e.jsx(k,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:s})]}),t&&e.jsx("p",{className:"text-muted-foreground",children:t})]}),i&&e.jsx("div",{className:"flex items-center gap-2",children:i})]})},D=({store:s})=>e.jsx(b.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxs(w,{className:"h-full flex flex-col hover:shadow-xl transition-all duration-300 group overflow-hidden border-slate-200",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:s.image_url||s.logo_url||"https://images.unsplash.com/photo-1556740758-90de2742e1e2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:s.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(j,{className:"bg-white/90 text-slate-800 hover:bg-white shadow-sm backdrop-blur-sm",children:[e.jsx(z,{className:"w-3 h-3 text-yellow-500 fill-yellow-500 mr-1"}),s.rating||4.5]})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx(j,{variant:"secondary",className:"shadow-sm backdrop-blur-sm opacity-90",children:s.category})})]}),e.jsx(A,{className:"p-4 pb-2",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("h3",{className:"font-bold text-lg line-clamp-1 group-hover:text-primary transition-colors",children:s.name})})}),e.jsxs(E,{className:"p-4 pt-0 flex-grow",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 h-10",children:s.description}),e.jsxs("div",{className:"space-y-1.5 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:s.address||"Marinilla, Antioquia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:s.hours||"8:00 AM - 8:00 PM"})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:s.phone})]})]}),s.tags&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:s.tags.slice(0,2).map(t=>e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full",children:t},t))})]}),e.jsx(M,{className:"p-4 pt-0 mt-auto border-t border-slate-100 bg-slate-50/50",children:e.jsxs(o,{className:"w-full mt-3 bg-white text-primary border border-primary hover:bg-primary hover:text-white transition-colors",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Ver Productos"]})})]})}),se=()=>{const[s,t]=l.useState([]),[p,i]=l.useState(!0),[r,m]=l.useState(""),[c,u]=l.useState("Todos");l.useEffect(()=>{(async()=>{i(!0);try{const{data:n,error:d}=await T.from("stores").select("*").order("created_at",{ascending:!1});if(d)throw d;const x=[...n||[],...N],h=Array.from(new Map(x.map(f=>[f.id,f])).values());t(h)}catch(n){console.error("Error fetching stores, using sample data:",n),t(N)}finally{i(!1)}})()},[]);const g=l.useMemo(()=>s.filter(a=>{var x,h;const n=a.name.toLowerCase().includes(r.toLowerCase())||((x=a.description)==null?void 0:x.toLowerCase().includes(r.toLowerCase()))||((h=a.address)==null?void 0:h.toLowerCase().includes(r.toLowerCase())),d=c==="Todos"||a.category===c;return n&&d}),[s,r,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(q,{children:[e.jsx("title",{children:"Servicios y Negocios | MiOriente"}),e.jsx("meta",{name:"description",content:"Encuentra los mejores restaurantes, tiendas y servicios en Marinilla y el Oriente Antioqueño."})]}),e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[e.jsx(V,{title:"Directorio de Servicios",description:"Lo que necesitas, cuando lo necesitas. Apoya el comercio local.",backgroundImage:"https://images.unsplash.com/photo-1556742502-ec7c0e9f34b1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10",children:e.jsx(w,{className:"p-4 shadow-lg border-none bg-white/95 backdrop-blur",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-grow w-full",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(P,{placeholder:"Buscar restaurantes, farmacias, tiendas...",className:"pl-9 bg-slate-50 border-slate-200",value:r,onChange:a=>m(a.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[e.jsx(o,{variant:c==="Todos"?"default":"outline",size:"sm",onClick:()=>u("Todos"),className:"whitespace-nowrap",children:"Todos"}),I.map(a=>e.jsx(o,{variant:c===a?"default":"outline",size:"sm",onClick:()=>u(a),className:"whitespace-nowrap",children:a},a))]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:p?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>e.jsx("div",{className:"h-80 bg-slate-200 rounded-xl animate-pulse"},a))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[g.length," Resultados"]}),e.jsxs(o,{variant:"ghost",size:"sm",className:"text-slate-500",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Más Filtros"]})]}),e.jsx(L,{mode:"popLayout",children:g.length>0?e.jsx(b.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(a=>e.jsx(D,{store:a},a.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx(v,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No encontramos lo que buscas"}),e.jsx("p",{className:"text-slate-500",children:"Intenta cambiar los términos de búsqueda o la categoría."}),e.jsx(o,{variant:"link",onClick:()=>{m(""),u("Todos")},className:"mt-2",children:"Limpiar filtros"})]})})]})})]})]})};export{se as default};
