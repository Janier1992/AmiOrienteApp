import{S as y,u as x,w as f,b as d,Z as c,t as n,y as i,Y as g}from"./index-2ce94096.js";import{R as P,_ as k}from"./BaseStoreDashboard-e6c3d8a1-4e64a417.js";import{s as _}from"./useStoreDashboard-6e1233c7-c0c33d1b.js";import{c as v}from"./credit-card-a50d43c9-92f7ec06.js";import{t as E}from"./upload-7019e91d-5c44e162.js";import{a as I,n as O}from"./settings-030bd9e5-67a41fef.js";import{r as S}from"./users-1e3e6770-1b81f4c4.js";import"./Helmet-c26e192a-711588c7.js";import"./log-out-8e22b546-d2fb474d.js";import"./index-bd02b651-8cbaad37.js";import"./triangle-alert-0cea0848-982fead7.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],D=y("table-properties",T),L=x((e,l)=>({products:[],categories:[],cart:[],stats:null,isLoading:!1,isLoadingProducts:!1,isLoadingCheckout:!1,error:null,fetchProducts:async s=>{e({isLoadingProducts:!0});try{const a=await _.obtenerProductos(s);e({products:a||[]})}catch(a){console.error(a),e({error:a.message})}finally{e({isLoadingProducts:!1})}},addToCart:s=>{const a=l().cart,o=a.find(t=>t.id===s.id);return e(o?{cart:a.map(t=>t.id===s.id?{...t,qty:t.qty+1}:t)}:{cart:[...a,{...s,qty:1}]}),!0},removeFromCart:s=>e(a=>({cart:a.cart.filter(o=>o.id!==s)})),updateCartQty:(s,a)=>e(o=>({cart:o.cart.map(t=>t.id===s?{...t,qty:Math.max(1,t.qty+a)}:t)})),clearCart:()=>e({cart:[]}),processCheckout:async(s,a,o,t)=>{const m=l().cart;if(m.length===0)return;const b=typeof a=="object"?{...a,method:o,type:"POS"}:{name:a,method:o,type:"POS"};e({isLoadingCheckout:!0});try{const{data:p,error:u}=await f.from("orders").insert({store_id:s,customer_id:null,status:"Entregado",total:t,delivery_address:JSON.stringify({guest:b,items:m.map(r=>({id:r.id,name:r.name,qty:r.qty,price:r.price}))})}).select().single();if(u)throw u;const h=m.map(r=>({order_id:p.id,product_id:r.id,quantity:r.qty,price:r.price})),{error:j}=await f.from("order_items").insert(h);if(j)throw j;for(const r of m)r.stock!==void 0&&await _.actualizarProducto(r.id,{stock:Math.max(0,r.stock-r.qty)});return l().clearCart(),!0}catch(p){throw p}finally{e({isLoadingCheckout:!1})}}})),w=d.lazy(()=>c(()=>n(()=>import("./OverviewTab-4d90d2b2-2472bb25.js"),["./OverviewTab-4d90d2b2-2472bb25.js","./index-2ce94096.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7-c0c33d1b.js","./index-bd02b651-8cbaad37.js","./triangle-alert-0cea0848-982fead7.js","./settings-030bd9e5-67a41fef.js","./package-8a53cd5c-b574c2fa.js","./trending-up-6d925098-59ad96bf.js"],import.meta.url),["./OverviewTab-4d90d2b2.js","./index-7593522e.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7.js","./index-bd02b651.js","./triangle-alert-0cea0848.js","./settings-030bd9e5.js","./package-8a53cd5c.js","./trending-up-6d925098.js"],import.meta.url)),q=d.lazy(()=>c(()=>n(()=>import("./OrdersTab-bbdc2219-8f06d749.js"),["./OrdersTab-bbdc2219-8f06d749.js","./index-2ce94096.js","./index-9e34f4e4.css","./badge-aa6603fa-a4f8275d.js","./select-f8f9a097-f8aafdb0.js","./check-d1d3ff5a-31b10f76.js","./useStoreDashboard-6e1233c7-c0c33d1b.js","./index-bd02b651-8cbaad37.js","./triangle-alert-0cea0848-982fead7.js","./package-8a53cd5c-b574c2fa.js","./clock-87f27ea4-2e4bce74.js","./truck-4de66a3b-1e0700fb.js","./map-pin-4c971ad0-cfbd587c.js"],import.meta.url),["./OrdersTab-bbdc2219.js","./index-7593522e.js","./index-9e34f4e4.css","./badge-aa6603fa.js","./select-f8f9a097.js","./check-d1d3ff5a.js","./useStoreDashboard-6e1233c7.js","./index-bd02b651.js","./triangle-alert-0cea0848.js","./package-8a53cd5c.js","./clock-87f27ea4.js","./truck-4de66a3b.js","./map-pin-4c971ad0.js"],import.meta.url)),R=d.lazy(()=>c(()=>n(()=>import("./GenericPOSView-837e2cc5-c84fd532.js"),["./GenericPOSView-837e2cc5-c84fd532.js","./index-2ce94096.js","./index-9e34f4e4.css","./input-30c35c11-b44761b2.js","./badge-aa6603fa-a4f8275d.js","./scroll-area-305a242e-4c6bab7e.js","./label-a4c1a31d-e949b025.js","./useStoreDashboard-6e1233c7-c0c33d1b.js","./shopping-cart-539ff770-43b9593e.js","./search-34f7aa01-f8dfb85b.js","./circle-check-big-e18572b1-a21d79ae.js"],import.meta.url),["./GenericPOSView-837e2cc5.js","./index-7593522e.js","./index-9e34f4e4.css","./input-30c35c11.js","./badge-aa6603fa.js","./scroll-area-305a242e.js","./label-a4c1a31d.js","./useStoreDashboard-6e1233c7.js","./shopping-cart-539ff770.js","./search-34f7aa01.js","./circle-check-big-e18572b1.js"],import.meta.url)),z=d.lazy(()=>c(()=>n(()=>import("./QuickGridProductView-ada467f0-cc5b38e1.js"),["./QuickGridProductView-ada467f0-cc5b38e1.js","./index-2ce94096.js","./index-9e34f4e4.css","./input-30c35c11-b44761b2.js","./table-4cf982c6-df9350bf.js","./useStoreDashboard-6e1233c7-c0c33d1b.js","./badge-aa6603fa-a4f8275d.js","./circle-alert-9e1a28d8-b20db8b3.js","./save-61774bd3-0eefbd18.js","./search-34f7aa01-f8dfb85b.js"],import.meta.url),["./QuickGridProductView-ada467f0.js","./index-7593522e.js","./index-9e34f4e4.css","./input-30c35c11.js","./table-4cf982c6.js","./useStoreDashboard-6e1233c7.js","./badge-aa6603fa.js","./circle-alert-9e1a28d8.js","./save-61774bd3.js","./search-34f7aa01.js"],import.meta.url)),V=d.lazy(()=>c(()=>n(()=>import("./BulkUploadTab-3e25ba5e-0feebfa1.js"),["./BulkUploadTab-3e25ba5e-0feebfa1.js","./index-2ce94096.js","./index-9e34f4e4.css","./upload-7019e91d-5c44e162.js","./circle-alert-9e1a28d8-b20db8b3.js"],import.meta.url).then(e=>e.a),["./BulkUploadTab-3e25ba5e.js","./index-7593522e.js","./index-9e34f4e4.css","./upload-7019e91d.js","./circle-alert-9e1a28d8.js"],import.meta.url)),C=d.lazy(()=>c(()=>n(()=>import("./FinancialsTab-aa1c096f-73719405.js"),["./FinancialsTab-aa1c096f-73719405.js","./index-2ce94096.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7-c0c33d1b.js","./index-bd02b651-8cbaad37.js","./triangle-alert-0cea0848-982fead7.js","./settings-030bd9e5-67a41fef.js","./trending-up-6d925098-59ad96bf.js","./credit-card-a50d43c9-92f7ec06.js","./circle-alert-9e1a28d8-b20db8b3.js"],import.meta.url),["./FinancialsTab-aa1c096f.js","./index-7593522e.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7.js","./index-bd02b651.js","./triangle-alert-0cea0848.js","./settings-030bd9e5.js","./trending-up-6d925098.js","./credit-card-a50d43c9.js","./circle-alert-9e1a28d8.js"],import.meta.url)),A=d.lazy(()=>c(()=>n(()=>import("./AdminTab-383d089a-5b305ef9.js"),["./AdminTab-383d089a-5b305ef9.js","./index-2ce94096.js","./index-9e34f4e4.css","./user-plus-413d81fa-4edbf458.js","./users-1e3e6770-1b81f4c4.js"],import.meta.url),["./AdminTab-383d089a.js","./index-7593522e.js","./index-9e34f4e4.css","./user-plus-413d81fa.js","./users-1e3e6770.js"],import.meta.url)),M=d.lazy(()=>c(()=>n(()=>import("./ProfileTab-b476a6ea-f55c5293.js"),["./ProfileTab-b476a6ea-f55c5293.js","./index-2ce94096.js","./index-9e34f4e4.css","./input-30c35c11-b44761b2.js","./label-a4c1a31d-e949b025.js","./useStoreDashboard-6e1233c7-c0c33d1b.js"],import.meta.url),["./ProfileTab-b476a6ea.js","./index-7593522e.js","./index-9e34f4e4.css","./input-30c35c11.js","./label-a4c1a31d.js","./useStoreDashboard-6e1233c7.js"],import.meta.url)),K=({store:e})=>{const l=[{path:"",label:"Resumen",icon:P,element:i.jsx(w,{storeId:e.id})},{path:"caja",label:"Caja (POS)",icon:v,element:i.jsx(R,{useStore:L,title:"Punto de Venta"})},{path:"productos",label:"Inventario (Rápido)",icon:D,element:i.jsx(z,{storeId:e.id})},{path:"pedidos",label:"Pedidos",icon:g,element:i.jsx(q,{storeId:e.id})},{path:"importar",label:"Importar",icon:E,element:i.jsx(V,{storeId:e.id})},{path:"finanzas",label:"Finanzas",icon:I,element:i.jsx(C,{storeId:e.id})},{path:"equipo",label:"Equipo",icon:S,element:i.jsx(A,{storeId:e.id})},{path:"configuracion",label:"Configuración",icon:O,element:i.jsx(M,{})}];return i.jsx(k,{store:e,tabs:l})};export{K as default};
