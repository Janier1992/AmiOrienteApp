import{l as P,Q as b,k as _,r as n,_ as c,j as i,g}from"./index-1fdf2a9f.js";import{L as E,B as v}from"./BaseStoreDashboard-4c707fc9.js";import{s as f}from"./useStoreDashboard-2973ddec.js";import{C as x}from"./credit-card-6951c825.js";import{U as I}from"./upload-0f151953.js";import{D as L,S as k}from"./settings-f7bf5df2.js";import{U as C}from"./users-f4b07dbb.js";import"./Helmet-25af496a.js";import"./log-out-1c289f47.js";import"./index-9a5cc2f3.js";import"./triangle-alert-320efe9f.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],O=P("table-properties",T),S=b((t,d)=>({products:[],categories:[],cart:[],stats:null,isLoading:!1,isLoadingProducts:!1,isLoadingCheckout:!1,error:null,fetchProducts:async a=>{t({isLoadingProducts:!0});try{const r=await f.obtenerProductos(a);t({products:r||[]})}catch(r){console.error(r),t({error:r.message})}finally{t({isLoadingProducts:!1})}},addToCart:a=>{const r=d().cart,s=r.find(e=>e.id===a.id);return t(s?{cart:r.map(e=>e.id===a.id?{...e,qty:e.qty+1}:e)}:{cart:[...r,{...a,qty:1}]}),!0},removeFromCart:a=>t(r=>({cart:r.cart.filter(s=>s.id!==a)})),updateCartQty:(a,r)=>t(s=>({cart:s.cart.map(e=>e.id===a?{...e,qty:Math.max(1,e.qty+r)}:e)})),clearCart:()=>t({cart:[]}),processCheckout:async(a,r,s,e)=>{const l=d().cart;if(l.length===0)return;const y=typeof r=="object"?{...r,method:s,type:"POS"}:{name:r,method:s,type:"POS"};t({isLoadingCheckout:!0});try{const{data:m,error:p}=await _.from("orders").insert({store_id:a,customer_id:null,status:"Entregado",total:e,delivery_address:JSON.stringify({guest:y,items:l.map(o=>({id:o.id,name:o.name,qty:o.qty,price:o.price}))})}).select().single();if(p)throw p;const h=l.map(o=>({order_id:m.id,product_id:o.id,quantity:o.qty,price:o.price})),{error:u}=await _.from("order_items").insert(h);if(u)throw u;for(const o of l)o.stock!==void 0&&await f.actualizarProducto(o.id,{stock:Math.max(0,o.stock-o.qty)});return d().clearCart(),!0}catch(m){throw m}finally{t({isLoadingCheckout:!1})}}})),j=n.lazy(()=>c(()=>import("./OverviewTab-9ca0347c.js"),["./OverviewTab-9ca0347c.js","./index-1fdf2a9f.js","./index-5de83a78.css","./useStoreDashboard-2973ddec.js","./index-9a5cc2f3.js","./triangle-alert-320efe9f.js","./settings-f7bf5df2.js","./package-061caa82.js","./trending-up-c46a6e61.js"],import.meta.url)),q=n.lazy(()=>c(()=>import("./OrdersTab-de7f7320.js"),["./OrdersTab-de7f7320.js","./index-1fdf2a9f.js","./index-5de83a78.css","./badge-2a6a9d48.js","./select-48f71311.js","./check-b3577c63.js","./useStoreDashboard-2973ddec.js","./index-9a5cc2f3.js","./triangle-alert-320efe9f.js","./package-061caa82.js","./clock-8d5c1bd5.js","./truck-2057356f.js","./pencil-55ef72a4.js","./map-pin-082f2517.js"],import.meta.url)),w=n.lazy(()=>c(()=>import("./GenericPOSView-e6027ccd.js"),["./GenericPOSView-e6027ccd.js","./index-1fdf2a9f.js","./index-5de83a78.css","./input-6f32d436.js","./badge-2a6a9d48.js","./scroll-area-700d22f5.js","./label-dba26b4b.js","./useStoreDashboard-2973ddec.js","./shopping-cart-1d516b7d.js","./search-a003f046.js","./circle-check-big-1affdfe6.js"],import.meta.url)),z=n.lazy(()=>c(()=>import("./QuickGridProductView-05677298.js"),["./QuickGridProductView-05677298.js","./index-1fdf2a9f.js","./index-5de83a78.css","./input-6f32d436.js","./table-a114d9f0.js","./useStoreDashboard-2973ddec.js","./badge-2a6a9d48.js","./circle-alert-2b8c34de.js","./save-fe27d79b.js","./search-a003f046.js"],import.meta.url)),D=n.lazy(()=>c(()=>import("./BulkUploadTab-1b69a68f.js").then(t=>t.a),["./BulkUploadTab-1b69a68f.js","./index-1fdf2a9f.js","./index-5de83a78.css","./upload-0f151953.js","./circle-alert-2b8c34de.js"],import.meta.url)),R=n.lazy(()=>c(()=>import("./FinancialsTab-778dcaf3.js"),["./FinancialsTab-778dcaf3.js","./index-1fdf2a9f.js","./index-5de83a78.css","./useStoreDashboard-2973ddec.js","./index-9a5cc2f3.js","./triangle-alert-320efe9f.js","./settings-f7bf5df2.js","./trending-up-c46a6e61.js","./credit-card-6951c825.js","./circle-alert-2b8c34de.js"],import.meta.url)),V=n.lazy(()=>c(()=>import("./AdminTab-069434ad.js"),["./AdminTab-069434ad.js","./index-1fdf2a9f.js","./index-5de83a78.css","./user-plus-108fb48f.js","./users-f4b07dbb.js"],import.meta.url)),A=n.lazy(()=>c(()=>import("./ProfileTab-24d8497a.js"),["./ProfileTab-24d8497a.js","./index-1fdf2a9f.js","./index-5de83a78.css","./input-6f32d436.js","./label-dba26b4b.js","./useStoreDashboard-2973ddec.js"],import.meta.url)),X=({store:t})=>{const d=[{path:"",label:"Resumen",icon:E,element:i.jsx(j,{storeId:t.id})},{path:"caja",label:"Caja (POS)",icon:x,element:i.jsx(w,{useStore:S,title:"Punto de Venta"})},{path:"productos",label:"Inventario (Rápido)",icon:O,element:i.jsx(z,{storeId:t.id})},{path:"pedidos",label:"Pedidos",icon:g,element:i.jsx(q,{storeId:t.id})},{path:"importar",label:"Importar",icon:I,element:i.jsx(D,{storeId:t.id})},{path:"finanzas",label:"Finanzas",icon:L,element:i.jsx(R,{storeId:t.id})},{path:"equipo",label:"Equipo",icon:C,element:i.jsx(V,{storeId:t.id})},{path:"configuracion",label:"Configuración",icon:k,element:i.jsx(A,{})}];return i.jsx(v,{store:t,tabs:d})};export{X as default};
