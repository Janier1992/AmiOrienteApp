import{n as j,x as v,s as C,R as m,j as e,B as c,L as p,H as N,C as h,a as y,b as S,d as w,c as k,k as P}from"./index-9083a265.js";import{H as L}from"./Helmet-a3f46ffc.js";import{A as R}from"./arrow-left-48017677.js";import{U as H}from"./utensils-crossed-8378ccfc.js";import{B as M}from"./bed-double-7e91c340.js";import{S as A}from"./shirt-73481007.js";import{P as B}from"./pill-c987e475.js";import{P as U}from"./pencil-cbcb3e21.js";import{W as E}from"./wheat-42f4aa4c.js";import{S as I}from"./shopping-cart-d265392e.js";import{S as T}from"./sprout-0c714d7f.js";import{P as $}from"./package-0a61c0c1.js";const Y=()=>{const i=j(),{user:a,loading:l}=v(),{toast:x}=C(),[t,n]=m.useState(null),[g,d]=m.useState(!0);m.useEffect(()=>{(async()=>{if(!l){if(!a){d(!1),n(null);return}d(!0);try{const{data:s,error:o}=await P.from("stores").select("category").eq("owner_id",a.id).single();n(s?s.category:null)}catch(s){console.error("Error fetching store category",s),n(null)}finally{d(!1)}}})()},[a,l]);const f=async r=>{if(a&&t){const s=r.toLowerCase(),o=t.toLowerCase();if(!(s===o||o.includes(s)||s.includes(o))){x({variant:"destructive",title:"Acceso Restringido",description:`Tienes una sesión activa como negocio tipo "${t}". No puedes acceder al módulo de "${r}".`});return}i("/tienda/dashboard");return}i(`/tienda/registro?service=${r}`)},b=[{name:"Restaurante",icon:H,description:"Platos y bebidas a domicilio."},{name:"Hotel",icon:M,description:"Gestión de reservas y habitaciones."},{name:"Ropa",icon:A,description:"Tiendas de moda y accesorios."},{name:"Farmacia",icon:B,description:"Medicamentos y productos de salud."},{name:"Papelería",icon:U,description:"Suministros de oficina y escolares."},{name:"Panadería",icon:E,description:"Pan, pasteles y postres."},{name:"Supermercado",icon:I,description:"Comestibles y productos para el hogar."},{name:"Cultivador",icon:T,description:"Productos frescos de la granja."},{name:"General",icon:$,description:"Cualquier otro tipo de negocio."}];if(l||g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50/50 dark:bg-gray-900/50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});const u=b.filter(r=>{if(!a||!t)return!0;const s=r.name.toLowerCase(),o=t.toLowerCase();return s===o||o.includes(s)||s.includes(o)});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative pt-20",children:[e.jsxs(L,{children:[e.jsx("title",{children:"Selección de Servicio | MiOriente"}),e.jsx("meta",{name:"description",content:"Selecciona el tipo de servicio para registrar tu negocio en MiOriente."})]}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(c,{variant:"outline",size:"icon",asChild:!0,className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow",children:e.jsxs(p,{to:"/",children:[e.jsx(N,{className:"h-5 w-5 text-gray-800"}),e.jsx("span",{className:"sr-only",children:"Volver al Inicio"})]})})}),a&&e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx(c,{asChild:!0,className:"shadow-lg",children:e.jsx(p,{to:"/tienda/dashboard",children:"Ir a Mi Cuenta"})})}),e.jsxs(h,{className:"w-full max-w-4xl shadow-2xl rounded-xl bg-white/95 backdrop-blur border-none",children:[e.jsxs(y,{className:"text-center pb-2",children:[e.jsx(S,{className:"text-3xl font-extrabold text-slate-900",children:a&&t?`Bienvenido, ${t}`:"Registro de Negocio"}),e.jsx(w,{className:"text-slate-600 mt-2 text-lg",children:a&&t?"Accede a tu panel de control o gestiona tu cuenta.":"Selecciona el tipo de servicio que ofrece tu negocio."})]}),e.jsxs(k,{className:"p-8",children:[u.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u.map((r,s)=>e.jsxs(h,{className:"flex flex-col items-center text-center p-6 cursor-pointer hover:shadow-xl hover:scale-105 transition-all duration-300 border-slate-200 bg-white group",onClick:()=>f(r.name),children:[e.jsx("div",{className:"p-4 rounded-full bg-primary/10 group-hover:bg-primary/20 transition-colors mb-4 text-primary",children:e.jsx(r.icon,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:r.name}),e.jsx("p",{className:"text-sm text-slate-500",children:r.description})]},s))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No se encontraron servicios disponibles para tu categoría."}),e.jsx(c,{variant:"link",onClick:()=>i("/tienda/dashboard"),children:"Ir al Dashboard"})]}),e.jsx("div",{className:"mt-10 text-center",children:e.jsxs(c,{variant:"outline",onClick:()=>i(-1),className:"border-slate-300 text-slate-700 hover:bg-slate-100",children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Volver"]})})]})]})]})};export{Y as default};
