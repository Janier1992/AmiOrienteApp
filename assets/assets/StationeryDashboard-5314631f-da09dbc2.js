import{S as E,u as se,s as T,Z as O,t as A,w as K,y as e,b as n,x as m,q as ae,W as te,F as Z,i as re,H as le,J as ie,A as ce,L as oe,X as Y,d as ne,p as de,_ as w}from"./index-2ce94096.js";import{R as me,_ as he}from"./BaseStoreDashboard-e6c3d8a1-4e64a417.js";import{l as u}from"./input-30c35c11-b44761b2.js";import{k as xe,O as ue,V as pe,I as ge,M as G}from"./select-f8f9a097-f8aafdb0.js";import{u as L}from"./label-a4c1a31d-e949b025.js";import{t as je}from"./textarea-d838bc32-b9870e6c.js";import{u as W}from"./useStoreDashboard-6e1233c7-c0c33d1b.js";import{o as ee}from"./search-34f7aa01-f8dfb85b.js";import{c as fe}from"./pencil-fe5409bf-721c7957.js";import{c as ye}from"./scroll-area-305a242e-4c6bab7e.js";import{d as ve}from"./badge-aa6603fa-a4f8275d.js";import{r as Q}from"./shopping-cart-539ff770-43b9593e.js";import{c as be}from"./credit-card-a50d43c9-92f7ec06.js";import{o as Ne}from"./circle-x-b1a95317-1b018dd7.js";import{U as we,k as ke}from"./StoreCustomersTab-a98fd0a4-2cfcce8b.js";import{u as Ce}from"./withStoreCategory-a5683c4a-1bcbd775.js";import{t as Se}from"./package-8a53cd5c-b574c2fa.js";import{t as _e}from"./upload-7019e91d-5c44e162.js";import{a as Pe,n as Le}from"./settings-030bd9e5-67a41fef.js";import{r as X}from"./users-1e3e6770-1b81f4c4.js";import"./Helmet-c26e192a-711588c7.js";import"./log-out-8e22b546-d2fb474d.js";import"./index-bd02b651-8cbaad37.js";import"./triangle-alert-0cea0848-982fead7.js";import"./check-d1d3ff5a-31b10f76.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],ze=E("banknote",Ee);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Me=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],qe=E("file-image",Me);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Ie=E("folder-open",$e);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Te=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Oe=E("grid-3x3",Te);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ae=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],De=E("list",Ae);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Fe=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],Ve=E("package-open",Fe);/**
* @license lucide-react v0.561.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ue=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],J=E("printer",Ue),Ke=({product:a,onEdit:x,onDelete:i})=>{var l,c;const t=a.sku||((c=(l=a.description)==null?void 0:l.match(/SKU:\s*([^\n]+)/))==null?void 0:c[1])||"N/A";return e.jsxs(ne,{className:"rounded-3xl overflow-hidden border-none shadow-sm hover:shadow-md transition-shadow group bg-white h-full flex flex-col",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100 p-4 flex items-center justify-center",children:[a.discount>0&&e.jsxs("span",{className:"absolute top-4 right-4 bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full z-10",children:["-",a.discount,"%"]}),a.image_url?e.jsx("img",{src:a.image_url,alt:a.name,className:"max-h-full max-w-full object-contain mix-blend-multiply"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[e.jsx(qe,{className:"h-10 w-10 mb-2"}),e.jsx("span",{className:"text-xs",children:"Sin imagen"})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-20",children:[e.jsx(m,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-md bg-white hover:bg-gray-100",onClick:d=>{d.stopPropagation(),x(a)},children:e.jsx(fe,{className:"h-4 w-4 text-blue-600"})}),e.jsx(m,{variant:"destructive",size:"icon",className:"h-8 w-8 rounded-full shadow-md",onClick:d=>{d.stopPropagation(),i(a.id)},children:e.jsx(Y,{className:"h-4 w-4"})})]})]}),e.jsxs(de,{className:"p-4 flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsx("h3",{className:"font-bold text-slate-900 line-clamp-2 text-md leading-tight",children:a.name})}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Papelería • SKU: ",t]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"text-lg font-bold text-slate-900",children:["$",Number(a.price).toLocaleString()]}),a.discount>0&&e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["$",(a.price*(1+a.discount/100)).toLocaleString()]})]})]})]})},Re=()=>{const{products:a,fetchProducts:x,addProduct:i,updateProduct:l,deleteProduct:c,store:t}=W(),[d,z]=n.useState("grid"),[f,g]=n.useState(""),[R,M]=n.useState(!1),[q,k]=n.useState(!1),[C,S]=n.useState(null),[o,v]=n.useState({name:"",price:"",description:"",stock:"1",category:"Office",sku:"",image_url:""}),[$,_]=n.useState(null);n.useEffect(()=>{t!=null&&t.id&&x(t.id)},[t==null?void 0:t.id,x]);const I=a.filter(r=>r.name.toLowerCase().includes(f.toLowerCase())),D=()=>{S(null),v({name:"",price:"",description:"",stock:"1",category:"Office",sku:"",image_url:""}),_(null),M(!0)},F=r=>{var h,j;S(r);const p=r.sku||((j=(h=r.description)==null?void 0:h.match(/SKU:\s*([^\n]+)/))==null?void 0:j[1])||"",N=r.description?r.description.replace(/\n\nSKU:\s*[^\n]+/,""):"";v({name:r.name,price:r.price,description:N,stock:r.stock,category:r.category||"Office",sku:p,image_url:r.image_url||""}),_(null),M(!0)},b=r=>{const{name:h,value:j}=r.target;v(p=>({...p,[h]:j}))},V=r=>{r.target.files&&r.target.files[0]&&_(r.target.files[0])},y=async(r,h,j)=>{const{error:p,data:N}=await K.storage.from(h).upload(j,r);if(p)throw new Error(`Error al subir archivo: ${p.message}`);const{data:s}=K.storage.from(h).getPublicUrl(N.path);return s.publicUrl},H=async r=>{r.preventDefault(),k(!0);try{let h=o.image_url;if($&&t!=null&&t.id){const N=$.name.replace(/[^a-zA-Z0-9.]/g,"_"),s=`${t.id}/${Date.now()}_${N}`;h=await y($,"product-images",s)}const j=o.sku?`${o.description||""}

SKU: ${o.sku}`:o.description,p={name:o.name,price:parseFloat(o.price),stock:parseInt(o.stock),product_type:"physical",requires_shipping:!0,image_url:h,description:j,store_id:t==null?void 0:t.id};C?(await l(C.id,p),w({title:"Producto actualizado",description:"Los cambios se han guardado."})):(await i(p),w({title:"Producto creado",description:"El producto se ha añadido correctamente."})),M(!1),S(null),v({name:"",price:"",description:"",stock:"1",category:"Office",sku:"",image_url:""}),_(null)}catch(h){console.error(h),w({title:"Error",description:h.message||"Error al guardar producto",variant:"destructive"})}finally{k(!1)}},B=async r=>{if(window.confirm("¿Seguro que deseas eliminar este producto?"))try{await c(r),w({title:"Producto eliminado"})}catch{w({title:"Error",description:"No se pudo eliminar.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-slate-900",children:"Inventario de Productos"}),e.jsx("p",{className:"text-gray-500",children:"Gestiona tu catálogo, precios y descuentos activos."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-2 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(u,{placeholder:"Buscar por nombre, SKU o categoría...",className:"pl-10 bg-gray-50 border-transparent focus:bg-white transition-colors",value:f,onChange:r=>g(r.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs(xe,{defaultValue:"all",children:[e.jsx(ue,{className:"w-[130px] rounded-full bg-gray-50 border-transparent",children:e.jsx(pe,{placeholder:"Categoría"})}),e.jsxs(ge,{children:[e.jsx(G,{value:"all",children:"Categoría"}),e.jsx(G,{value:"office",children:"Oficina"}),e.jsx(G,{value:"school",children:"Escolar"})]})]}),e.jsxs("div",{className:"flex bg-gray-50 rounded-full p-1 border border-gray-100",children:[e.jsx(m,{variant:"ghost",size:"icon",className:`rounded-full h-8 w-8 ${d==="grid"?"bg-white shadow-sm":""}`,onClick:()=>z("grid"),children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",className:`rounded-full h-8 w-8 ${d==="list"?"bg-white shadow-sm":""}`,onClick:()=>z("list"),children:e.jsx(De,{className:"h-4 w-4"})})]})]}),e.jsxs(ae,{open:R,onOpenChange:M,children:[e.jsx(te,{asChild:!0,children:e.jsxs(m,{className:"bg-black text-white hover:bg-gray-800 rounded-full px-6",onClick:D,children:[e.jsx(Z,{className:"h-4 w-4 mr-2"})," Añadir Producto"]})}),e.jsxs(re,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsx(le,{children:e.jsx(ie,{children:C?"Editar Producto":"Agregar Nuevo Producto"})}),e.jsxs("form",{onSubmit:H,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"name",children:"Nombre del Producto"}),e.jsx(u,{id:"name",name:"name",required:!0,value:o.name,onChange:b,placeholder:"Ej: Cuaderno Norma"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"price",children:"Precio"}),e.jsx(u,{id:"price",name:"price",type:"number",required:!0,value:o.price,onChange:b,placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"stock",children:"Stock"}),e.jsx(u,{id:"stock",name:"stock",type:"number",required:!0,value:o.stock,onChange:b})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"category",children:"Categoría"}),e.jsx(u,{id:"category",name:"category",value:o.category,onChange:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"sku",children:"SKU (Opcional)"}),e.jsx(u,{id:"sku",name:"sku",value:o.sku,onChange:b,placeholder:"COD-001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"image_upload",children:"Imagen"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[o.image_url&&e.jsx("img",{src:o.image_url,alt:"Preview",className:"h-10 w-10 object-cover rounded border"}),e.jsx(u,{id:"image_upload",type:"file",accept:"image/*",onChange:V})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"description",children:"Descripción"}),e.jsx(je,{id:"description",name:"description",value:o.description,onChange:b,rows:3})]}),e.jsx(m,{type:"submit",className:"w-full bg-yellow-400 text-black hover:bg-yellow-500 font-bold",disabled:q,children:q?e.jsx(ce,{className:"h-4 w-4 animate-spin"}):C?"Guardar Cambios":"Guardar Producto"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[I.map(r=>e.jsx("div",{className:"relative group h-full",children:e.jsx(Ke,{product:{...r,discount:0},onEdit:F,onDelete:B})},r.id)),I.length===0&&e.jsx("div",{className:"col-span-full py-12 text-center text-gray-400",children:"No se encontraron productos. Añade uno nuevo para empezar."})]})]})},He={async createPOSTransaction(a){const{orderPayload:x,items:i}=a,{data:l,error:c}=await K.from("orders").insert(x).select().single();if(c)throw c;for(const t of i){const d=Math.max(0,t.stock-t.qty);await K.from("products").update({stock:d}).eq("id",t.id)}return l}},Be=se((a,x)=>({cart:[],isLoadingCheckout:!1,addToCart:i=>{const l=x().cart,c=l.find(t=>t.id===i.id);if(c){if(c.qty>=i.stock)return!1;a({cart:l.map(t=>t.id===i.id?{...t,qty:t.qty+1}:t)})}else a({cart:[...l,{...i,qty:1}]});return!0},removeFromCart:i=>{a(l=>({cart:l.cart.filter(c=>c.id!==i)}))},updateCartQty:(i,l)=>{a(c=>({cart:c.cart.map(t=>{if(t.id===i){const d=Math.max(1,t.qty+l);return l>0&&d>t.stock?t:{...t,qty:d}}return t})}))},clearCart:()=>a({cart:[]}),processCheckout:async(i,l,c,t)=>{const d=x().cart;if(d.length===0)return;const z=typeof l=="object"?{name:l.name,doc_id:l.docId,phone:l.phone,email:l.email,method:c,type:"POS"}:{name:l,method:c,type:"POS"};a({isLoadingCheckout:!0});try{const f={store_id:i,customer_id:null,status:"Entregado",total:t,delivery_address:JSON.stringify({guest:z,items:d.map(g=>({id:g.id,name:g.name,qty:g.qty,price:g.price}))})};return await He.createPOSTransaction({orderPayload:f,items:d}),x().clearCart(),W.getState().fetchProducts(i,!0),!0}catch(f){throw f}finally{a({isLoadingCheckout:!1})}}})),Ge=()=>{const{products:a,fetchProducts:x,store:i}=W(),{cart:l,addToCart:c,removeFromCart:t,updateCartQty:d,processCheckout:z,isLoadingCheckout:f}=Be(),[g,R]=n.useState(""),[M,q]=n.useState(!1),[k,C]=n.useState("Efectivo"),[S,o]=n.useState(""),[v,$]=n.useState(""),[_,I]=n.useState(""),[D,F]=n.useState(""),[b,V]=n.useState(!1),[y,H]=n.useState(null);n.useEffect(()=>{i!=null&&i.id&&x(i.id)},[i==null?void 0:i.id]);const{subtotal:B,total:r,itemCount:h}=n.useMemo(()=>{const s=l.reduce((P,U)=>P+U.price*U.qty,0);return{subtotal:s,total:s,itemCount:l.reduce((P,U)=>P+U.qty,0)}},[l]),j=s=>{c(s)||w({title:"Stock insuficiente",variant:"destructive"})},p=async()=>{try{if(!S||!v){w({title:"Datos incompletos",description:"Nombre y Documento son obligatorios",variant:"destructive"});return}const s={name:S,docId:v,phone:_,email:D},P={customer:s,total:r,paymentMethod:k,items:[...l]};await z(i.id,s,k,r),H(P),V(!0),q(!1),o(""),$(""),I(""),F("")}catch(s){console.error(s),w({title:"Error en venta",description:s.message,variant:"destructive"})}},N=a.filter(s=>s.name.toLowerCase().includes(g.toLowerCase())||s.sku&&s.sku.includes(g));return e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-140px)] gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-slate-50 border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-white border-b flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(u,{placeholder:"Buscar productos (Nombre, SKU)...",className:"pl-9 bg-gray-100 border-none",value:g,onChange:s=>R(s.target.value),autoFocus:!0})]})}),e.jsxs(ye,{className:"flex-1 p-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:N.map(s=>e.jsxs("div",{className:`
                                    group relative bg-white border rounded-xl p-3 shadow-sm hover:shadow-md transition-all cursor-pointer select-none
                                    ${s.stock<=0?"opacity-50 grayscale":"hover:border-yellow-400"}
                                `,onClick:()=>s.stock>0&&j(s),children:[e.jsx("div",{className:"h-24 bg-gray-100 rounded-lg mb-2 flex items-center justify-center overflow-hidden",children:s.image_url?e.jsx("img",{src:s.image_url,alt:"",className:"w-full h-full object-cover"}):e.jsx(Ve,{className:"text-gray-300 h-8 w-8"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold text-sm leading-tight line-clamp-2 min-h-[2.5em]",children:s.name}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-gray-600 font-mono",children:[s.stock," un."]}),e.jsxs("span",{className:"font-bold text-slate-900 text-sm",children:["$",Number(s.price).toLocaleString()]})]})]}),s.stock<=0&&e.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded",children:"Agotado"})})]},s.id))}),N.length===0&&e.jsx("div",{className:"text-center py-10 text-gray-400",children:"No se encontraron productos"})]})]}),e.jsxs("div",{className:"w-full lg:w-[400px] bg-white border rounded-xl flex flex-col shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b bg-yellow-400/10 flex items-center justify-between",children:[e.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-yellow-600"}),"Ticket de Venta"]}),e.jsxs(ve,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[h," Ítems"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[l.map(s=>e.jsxs("div",{className:"flex gap-3 items-center p-2 rounded-lg hover:bg-slate-50 border border-transparent hover:border-slate-100 group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",Number(s.price).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 rounded-lg p-1",children:[e.jsx(m,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>d(s.id,-1),children:e.jsx(oe,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-sm font-mono",children:s.qty}),e.jsx(m,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>d(s.id,1),children:e.jsx(Z,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-right min-w-[60px]",children:e.jsxs("p",{className:"font-bold text-sm text-slate-700",children:["$",(s.price*s.qty).toLocaleString()]})}),e.jsx(m,{size:"icon",variant:"ghost",className:"h-6 w-6 text-red-400 opacity-0 group-hover:opacity-100 hover:text-red-600",onClick:()=>t(s.id),children:e.jsx(Y,{className:"h-3 w-3"})})]},s.id)),l.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-2",children:[e.jsx(Q,{className:"h-12 w-12 opacity-20"}),e.jsx("p",{className:"text-sm",children:"Ticket vacío"}),e.jsx("p",{className:"text-xs text-gray-300 px-8 text-center",children:"Selecciona productos del inventario para iniciar una venta."})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",B.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900 pt-2 border-t border-dashed border-gray-300",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",r.toLocaleString()]})]})]}),M?e.jsxs("div",{className:"space-y-3 animate-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(u,{placeholder:"Nombre Cliente *",value:S,onChange:s=>o(s.target.value),className:"bg-white col-span-2"}),e.jsx(u,{placeholder:"Documento (C.C/NIT) *",value:v,onChange:s=>$(s.target.value),className:"bg-white"}),e.jsx(u,{placeholder:"Teléfono",value:_,onChange:s=>I(s.target.value),className:"bg-white"}),e.jsx(u,{placeholder:"Correo Electrónico (Para factura)",value:D,onChange:s=>F(s.target.value),className:"bg-white col-span-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(m,{variant:k==="Efectivo"?"default":"outline",onClick:()=>C("Efectivo"),className:"w-full justify-start gap-2",children:[e.jsx(ze,{className:"h-4 w-4"})," Efectivo"]}),e.jsxs(m,{variant:k==="Tarjeta"?"default":"outline",onClick:()=>C("Tarjeta"),className:"w-full justify-start gap-2",children:[e.jsx(be,{className:"h-4 w-4"})," Tarjeta"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",className:"flex-1",onClick:()=>q(!1),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"})," Cancelar"]}),e.jsxs(m,{className:"flex-[2] bg-green-600 hover:bg-green-700",onClick:p,disabled:f,children:[e.jsx(J,{className:"h-4 w-4 mr-2"})," ",f?"Procesando...":"Confirmar Venta"]})]})]}):e.jsx(m,{className:"w-full bg-slate-900 hover:bg-slate-800 text-white h-12 text-lg font-bold shadow-md",disabled:l.length===0,onClick:()=>q(!0),children:"Cobrar"})]})]}),b&&y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"bg-green-600 p-4 text-white text-center",children:[e.jsx("div",{className:"mx-auto bg-white/20 w-12 h-12 rounded-full flex items-center justify-center mb-2",children:e.jsx(J,{className:"h-6 w-6"})}),e.jsx("h2",{className:"text-xl font-bold",children:"¡Venta Exitosa!"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Factura generada correctamente"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center space-y-1 pb-4 border-b",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Pagado"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-800",children:["$",y.total.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Método: ",y.paymentMethod]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Cliente:"}),e.jsx("span",{className:"font-medium",children:y.customer.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Documento:"}),e.jsx("span",{className:"font-medium",children:y.customer.docId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Email:"}),e.jsx("span",{className:"font-medium",children:y.customer.email||"N/A"})]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-xs space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-500 mb-2",children:"Resumen de productos:"}),y.items.map((s,P)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s.qty,"x ",s.name]}),e.jsxs("span",{children:["$",(s.price*s.qty).toLocaleString()]})]},P))]}),e.jsxs("div",{className:"pt-2 gap-3 flex",children:[e.jsx(m,{variant:"outline",className:"flex-1",onClick:()=>V(!1),children:"Cerrar"}),e.jsxs(m,{className:"flex-1",onClick:()=>window.print(),children:[e.jsx(J,{className:"h-4 w-4 mr-2"})," Imprimir"]})]})]})]})})]})},Je=T.lazy(()=>O(()=>A(()=>import("./OverviewTab-4d90d2b2-2472bb25.js"),["./OverviewTab-4d90d2b2-2472bb25.js","./index-2ce94096.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7-c0c33d1b.js","./index-bd02b651-8cbaad37.js","./triangle-alert-0cea0848-982fead7.js","./settings-030bd9e5-67a41fef.js","./package-8a53cd5c-b574c2fa.js","./trending-up-6d925098-59ad96bf.js"],import.meta.url),["./OverviewTab-4d90d2b2.js","./index-7593522e.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7.js","./index-bd02b651.js","./triangle-alert-0cea0848.js","./settings-030bd9e5.js","./package-8a53cd5c.js","./trending-up-6d925098.js"],import.meta.url)),Qe=T.lazy(()=>O(()=>A(()=>import("./OrdersTab-bbdc2219-8f06d749.js"),["./OrdersTab-bbdc2219-8f06d749.js","./index-2ce94096.js","./index-9e34f4e4.css","./badge-aa6603fa-a4f8275d.js","./select-f8f9a097-f8aafdb0.js","./check-d1d3ff5a-31b10f76.js","./useStoreDashboard-6e1233c7-c0c33d1b.js","./index-bd02b651-8cbaad37.js","./triangle-alert-0cea0848-982fead7.js","./package-8a53cd5c-b574c2fa.js","./clock-87f27ea4-2e4bce74.js","./truck-4de66a3b-1e0700fb.js","./map-pin-4c971ad0-cfbd587c.js"],import.meta.url),["./OrdersTab-bbdc2219.js","./index-7593522e.js","./index-9e34f4e4.css","./badge-aa6603fa.js","./select-f8f9a097.js","./check-d1d3ff5a.js","./useStoreDashboard-6e1233c7.js","./index-bd02b651.js","./triangle-alert-0cea0848.js","./package-8a53cd5c.js","./clock-87f27ea4.js","./truck-4de66a3b.js","./map-pin-4c971ad0.js"],import.meta.url)),We=T.lazy(()=>O(()=>A(()=>import("./AdminTab-383d089a-5b305ef9.js"),["./AdminTab-383d089a-5b305ef9.js","./index-2ce94096.js","./index-9e34f4e4.css","./user-plus-413d81fa-4edbf458.js","./users-1e3e6770-1b81f4c4.js"],import.meta.url),["./AdminTab-383d089a.js","./index-7593522e.js","./index-9e34f4e4.css","./user-plus-413d81fa.js","./users-1e3e6770.js"],import.meta.url)),Xe=T.lazy(()=>O(()=>A(()=>import("./BulkUploadTab-3e25ba5e-0feebfa1.js"),["./BulkUploadTab-3e25ba5e-0feebfa1.js","./index-2ce94096.js","./index-9e34f4e4.css","./upload-7019e91d-5c44e162.js","./circle-alert-9e1a28d8-b20db8b3.js"],import.meta.url).then(a=>a.a),["./BulkUploadTab-3e25ba5e.js","./index-7593522e.js","./index-9e34f4e4.css","./upload-7019e91d.js","./circle-alert-9e1a28d8.js"],import.meta.url)),Ze=T.lazy(()=>O(()=>A(()=>import("./FinancialsTab-aa1c096f-73719405.js"),["./FinancialsTab-aa1c096f-73719405.js","./index-2ce94096.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7-c0c33d1b.js","./index-bd02b651-8cbaad37.js","./triangle-alert-0cea0848-982fead7.js","./settings-030bd9e5-67a41fef.js","./trending-up-6d925098-59ad96bf.js","./credit-card-a50d43c9-92f7ec06.js","./circle-alert-9e1a28d8-b20db8b3.js"],import.meta.url),["./FinancialsTab-aa1c096f.js","./index-7593522e.js","./index-9e34f4e4.css","./useStoreDashboard-6e1233c7.js","./index-bd02b651.js","./triangle-alert-0cea0848.js","./settings-030bd9e5.js","./trending-up-6d925098.js","./credit-card-a50d43c9.js","./circle-alert-9e1a28d8.js"],import.meta.url)),Ye=({store:a})=>{const x=[{path:"",label:"Resumen",icon:me,element:e.jsx(Je,{storeId:a.id})},{path:"caja",label:"Caja / Ventas",icon:Q,element:e.jsx(Ge,{})},{path:"pedidos",label:"Historial Pedidos",icon:Se,element:e.jsx(Qe,{storeId:a.id})},{path:"productos",label:"Inventario",icon:Ie,element:e.jsx(Re,{})},{path:"importar",label:"Importar",icon:_e,element:e.jsx(Xe,{storeId:a.id})},{path:"finanzas",label:"Finanzas",icon:Pe,element:e.jsx(Ze,{storeId:a.id})},{path:"equipo",label:"Equipo",icon:X,element:e.jsx(We,{storeId:a.id})},{path:"clientes",label:"Clientes",icon:X,element:e.jsx(we,{})},{path:"configuracion",label:"Configuración",icon:Le,element:e.jsx(ke,{})}];return e.jsx(he,{store:a,tabs:x,title:"Papelería Admin"})},Cs=Ce(Ye,["Papelería","Papeleria"]);export{Cs as default};
