import{r as n,j as e,S as y,B as S,b as w,t as x,h as m,c as D}from"./index-1004543a.js";import{C as h,a as p,b as u,d as f,c as j}from"./card-2a69ef9f.js";import{I as c}from"./input-a76da225.js";import{L as o}from"./label-d8349a8f.js";import{useStoreDashboard as g}from"./useStoreDashboard-597dd6f0.js";import{B as A}from"./badge-1666b2ce.js";import{U as I}from"./users-9574cf82.js";const U=()=>{const{store:s,updateStoreSettings:r}=g(),[a,l]=n.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||""}),[t,d]=n.useState(!1),b=async i=>{i.preventDefault(),d(!0);try{await r(a),x({title:"Configuración guardada"})}catch{x({title:"Error",description:"No se pudo actualizar.",variant:"destructive"})}finally{d(!1)}};return e.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"})," Información del Negocio"]}),e.jsx(f,{children:"Detalles públicos de tu tienda en MiOriente"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Nombre del Negocio"}),e.jsx(c,{value:a.name,onChange:i=>l({...a,name:i.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Descripción"}),e.jsx(c,{value:a.description,onChange:i=>l({...a,description:i.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Teléfono de Contacto"}),e.jsx(c,{value:a.phone,onChange:i=>l({...a,phone:i.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Dirección Física"}),e.jsx(c,{value:a.address,onChange:i=>l({...a,address:i.target.value})})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs(S,{type:"submit",disabled:t,children:[t&&e.jsx(w,{className:"animate-spin mr-2 h-4 w-4"}),"Guardar Cambios"]})})]})})]})})},v=n.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r}));v.displayName="Avatar";const N=n.forwardRef(({className:s,...r},a)=>e.jsx("img",{ref:a,className:m("aspect-square h-full w-full",s),...r}));N.displayName="AvatarImage";const C=n.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r}));C.displayName="AvatarFallback";const q=()=>{const{store:s,customers:r,fetchCustomers:a,isLoadingCustomers:l}=g();return n.useEffect(()=>{s!=null&&s.id&&a(s.id)},[s==null?void 0:s.id]),l?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando clientes..."}):e.jsx("div",{className:"space-y-6",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"})," Mis Clientes"]}),e.jsx(f,{children:"Personas que han realizado compras en tu negocio."})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.map(t=>{var d;return e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsxs(v,{className:"h-12 w-12",children:[e.jsx(N,{src:t.avatar_url}),e.jsx(C,{children:((d=t.full_name)==null?void 0:d.substring(0,2).toUpperCase())||"NA"})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:t.full_name||"Desconocido"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(A,{variant:"secondary",className:"text-xs font-normal",children:[e.jsx(D,{className:"h-3 w-3 mr-1"})," ",t.total_orders," pedidos"]}),e.jsxs("span",{className:"text-xs font-bold text-green-600",children:["$",Number(t.total_spent).toLocaleString()]})]})]})]},t.id)}),r.length===0&&e.jsx("p",{className:"col-span-full text-center text-muted-foreground py-8",children:"Aún no tienes clientes registrados."})]})})]})})};export{q as S,U as a};
