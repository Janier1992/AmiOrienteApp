import{g as j,l as v,i as C,R as m,j as e,B as c,L as p,H as N,e as y}from"./index-6cceb248.js";import{H as S}from"./Helmet-b2be6dca.js";import{C as h,a as w,b as k,d as P,c as L}from"./card-11673469.js";import{A as R}from"./arrow-left-c579a5fe.js";import{U as H}from"./utensils-crossed-b09228da.js";import{B as M}from"./bed-double-bf7f458d.js";import{S as A}from"./shirt-128d988e.js";import{P as B}from"./pill-a962ee08.js";import{P as U}from"./pencil-581749d1.js";import{W as E}from"./wheat-1745ec40.js";import{S as I}from"./shopping-cart-333aba80.js";import{S as T}from"./sprout-3590ce09.js";import{P as $}from"./package-7e17dda3.js";const Z=()=>{const i=j(),{user:t,loading:l}=v(),{toast:x}=C(),[a,n]=m.useState(null),[g,d]=m.useState(!0);m.useEffect(()=>{(async()=>{if(!l){if(!t){d(!1),n(null);return}d(!0);try{const{data:s,error:o}=await y.from("stores").select("category").eq("owner_id",t.id).single();n(s?s.category:null)}catch(s){console.error("Error fetching store category",s),n(null)}finally{d(!1)}}})()},[t,l]);const f=async r=>{if(t&&a){const s=r.toLowerCase(),o=a.toLowerCase();if(!(s===o||o.includes(s)||s.includes(o))){x({variant:"destructive",title:"Acceso Restringido",description:`Tienes una sesión activa como negocio tipo "${a}". No puedes acceder al módulo de "${r}".`});return}i("/tienda/dashboard");return}i(`/tienda/registro?service=${r}`)},b=[{name:"Restaurante",icon:H,description:"Platos y bebidas a domicilio."},{name:"Hotel",icon:M,description:"Gestión de reservas y habitaciones."},{name:"Ropa",icon:A,description:"Tiendas de moda y accesorios."},{name:"Farmacia",icon:B,description:"Medicamentos y productos de salud."},{name:"Papelería",icon:U,description:"Suministros de oficina y escolares."},{name:"Panadería",icon:E,description:"Pan, pasteles y postres."},{name:"Supermercado",icon:I,description:"Comestibles y productos para el hogar."},{name:"Cultivador",icon:T,description:"Productos frescos de la granja."},{name:"General",icon:$,description:"Cualquier otro tipo de negocio."}];if(l||g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50/50 dark:bg-gray-900/50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});const u=b.filter(r=>{if(!t||!a)return!0;const s=r.name.toLowerCase(),o=a.toLowerCase();return s===o||o.includes(s)||s.includes(o)});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative pt-20",children:[e.jsxs(S,{children:[e.jsx("title",{children:"Selección de Servicio | MiOriente"}),e.jsx("meta",{name:"description",content:"Selecciona el tipo de servicio para registrar tu negocio en MiOriente."})]}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx(c,{variant:"outline",size:"icon",asChild:!0,className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow",children:e.jsxs(p,{to:"/",children:[e.jsx(N,{className:"h-5 w-5 text-gray-800"}),e.jsx("span",{className:"sr-only",children:"Volver al Inicio"})]})})}),t&&e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx(c,{asChild:!0,className:"shadow-lg",children:e.jsx(p,{to:"/tienda/dashboard",children:"Ir a Mi Cuenta"})})}),e.jsxs(h,{className:"w-full max-w-4xl shadow-2xl rounded-xl bg-white/95 backdrop-blur border-none",children:[e.jsxs(w,{className:"text-center pb-2",children:[e.jsx(k,{className:"text-3xl font-extrabold text-slate-900",children:t&&a?`Bienvenido, ${a}`:"Registro de Negocio"}),e.jsx(P,{className:"text-slate-600 mt-2 text-lg",children:t&&a?"Accede a tu panel de control o gestiona tu cuenta.":"Selecciona el tipo de servicio que ofrece tu negocio."})]}),e.jsxs(L,{className:"p-8",children:[u.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u.map((r,s)=>e.jsxs(h,{className:"flex flex-col items-center text-center p-6 cursor-pointer hover:shadow-xl hover:scale-105 transition-all duration-300 border-slate-200 bg-white group",onClick:()=>f(r.name),children:[e.jsx("div",{className:"p-4 rounded-full bg-primary/10 group-hover:bg-primary/20 transition-colors mb-4 text-primary",children:e.jsx(r.icon,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:r.name}),e.jsx("p",{className:"text-sm text-slate-500",children:r.description})]},s))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No se encontraron servicios disponibles para tu categoría."}),e.jsx(c,{variant:"link",onClick:()=>i("/tienda/dashboard"),children:"Ir al Dashboard"})]}),e.jsx("div",{className:"mt-10 text-center",children:e.jsxs(c,{variant:"outline",onClick:()=>i(-1),className:"border-slate-300 text-slate-700 hover:bg-slate-100",children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Volver"]})})]})]})]})};export{Z as default};
