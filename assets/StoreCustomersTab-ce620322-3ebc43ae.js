import{b as d,y as e,l as m,d as u,f as h,h as p,v as w,G as f,p as j,x as C,A as S,Y as A,_ as x}from"./index-4834c6e1.js";import{l as t}from"./input-977568de-bea10295.js";import{u as o}from"./label-6ced007b-31f64b09.js";import{u as v}from"./useStoreDashboard-6cfa5bdd-a014cfe4.js";import{d as _}from"./badge-34bdff7c-b2c90fce.js";import{r as D}from"./users-93d0d9a2-82ed9403.js";const E=()=>{const{store:s,updateStoreSettings:l}=v(),[a,n]=d.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||""}),[r,c]=d.useState(!1),b=async i=>{i.preventDefault(),c(!0);try{await l(a),x({title:"Configuración guardada"})}catch{x({title:"Error",description:"No se pudo actualizar.",variant:"destructive"})}finally{c(!1)}};return e.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"})," Información del Negocio"]}),e.jsx(f,{children:"Detalles públicos de tu tienda en MiOriente"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Nombre del Negocio"}),e.jsx(t,{value:a.name,onChange:i=>n({...a,name:i.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Descripción"}),e.jsx(t,{value:a.description,onChange:i=>n({...a,description:i.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Teléfono de Contacto"}),e.jsx(t,{value:a.phone,onChange:i=>n({...a,phone:i.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Dirección Física"}),e.jsx(t,{value:a.address,onChange:i=>n({...a,address:i.target.value})})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs(C,{type:"submit",disabled:r,children:[r&&e.jsx(S,{className:"animate-spin mr-2 h-4 w-4"}),"Guardar Cambios"]})})]})})]})})},g=d.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l}));g.displayName="Avatar";const N=d.forwardRef(({className:s,...l},a)=>e.jsx("img",{ref:a,className:m("aspect-square h-full w-full",s),...l}));N.displayName="AvatarImage";const y=d.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...l}));y.displayName="AvatarFallback";const F=()=>{const{store:s,customers:l,fetchCustomers:a,isLoadingCustomers:n}=v();return d.useEffect(()=>{s!=null&&s.id&&a(s.id)},[s==null?void 0:s.id]),n?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando clientes..."}):e.jsx("div",{className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"})," Mis Clientes"]}),e.jsx(f,{children:"Personas que han realizado compras en tu negocio."})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.map(r=>{var c;return e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsxs(g,{className:"h-12 w-12",children:[e.jsx(N,{src:r.avatar_url}),e.jsx(y,{children:((c=r.full_name)==null?void 0:c.substring(0,2).toUpperCase())||"NA"})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:r.full_name||"Desconocido"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(_,{variant:"secondary",className:"text-xs font-normal",children:[e.jsx(A,{className:"h-3 w-3 mr-1"})," ",r.total_orders," pedidos"]}),e.jsxs("span",{className:"text-xs font-bold text-green-600",children:["$",Number(r.total_spent).toLocaleString()]})]})]})]},r.id)}),l.length===0&&e.jsx("p",{className:"col-span-full text-center text-muted-foreground py-8",children:"Aún no tienes clientes registrados."})]})})]})})};export{F as U,E as k};
