import{f as w,g as S,j as e,h as C,B as o,r as l,A as k,m as v,c as b,e as L}from"./index-1004543a.js";import{H as A}from"./Helmet-0aaa1c92.js";import{I as E}from"./input-a76da225.js";import{B as j}from"./badge-1666b2ce.js";import{C as y,a as M,c as T,e as _}from"./card-2a69ef9f.js";import"./tabs-b28f01ce.js";import{S as q,a as N}from"./sample-data-be06332b.js";import{S as P}from"./search-b4265b90.js";import{S as I}from"./star-3144cca6.js";import{M as z}from"./map-pin-da7b2b80.js";import{C as B}from"./clock-cb46345e.js";import{P as F}from"./phone-4e17a72b.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],R=w("chevron-left",H);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],V=w("funnel",O),D=({title:s,description:t,showBack:p=!1,action:i,className:r})=>{const m=S();return e.jsxs("div",{className:C("flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6",r),children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p&&e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m(-1),className:"h-8 w-8 -ml-2",children:e.jsx(R,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:s})]}),t&&e.jsx("p",{className:"text-muted-foreground",children:t})]}),i&&e.jsx("div",{className:"flex items-center gap-2",children:i})]})},G=({store:s})=>e.jsx(v.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxs(y,{className:"h-full flex flex-col hover:shadow-xl transition-all duration-300 group overflow-hidden border-slate-200",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:s.image_url||s.logo_url||"https://images.unsplash.com/photo-1556740758-90de2742e1e2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:s.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(j,{className:"bg-white/90 text-slate-800 hover:bg-white shadow-sm backdrop-blur-sm",children:[e.jsx(I,{className:"w-3 h-3 text-yellow-500 fill-yellow-500 mr-1"}),s.rating||4.5]})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx(j,{variant:"secondary",className:"shadow-sm backdrop-blur-sm opacity-90",children:s.category})})]}),e.jsx(M,{className:"p-4 pb-2",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("h3",{className:"font-bold text-lg line-clamp-1 group-hover:text-primary transition-colors",children:s.name})})}),e.jsxs(T,{className:"p-4 pt-0 flex-grow",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 h-10",children:s.description}),e.jsxs("div",{className:"space-y-1.5 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:s.address||"Marinilla, Antioquia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:s.hours||"8:00 AM - 8:00 PM"})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"truncate",children:s.phone})]})]}),s.tags&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:s.tags.slice(0,2).map(t=>e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full",children:t},t))})]}),e.jsx(_,{className:"p-4 pt-0 mt-auto border-t border-slate-100 bg-slate-50/50",children:e.jsxs(o,{className:"w-full mt-3 bg-white text-primary border border-primary hover:bg-primary hover:text-white transition-colors",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Ver Productos"]})})]})}),te=()=>{const[s,t]=l.useState([]),[p,i]=l.useState(!0),[r,m]=l.useState(""),[c,u]=l.useState("Todos");l.useEffect(()=>{(async()=>{i(!0);try{const{data:n,error:d}=await L.from("stores").select("*").order("created_at",{ascending:!1});if(d)throw d;const x=[...n||[],...N],h=Array.from(new Map(x.map(f=>[f.id,f])).values());t(h)}catch(n){console.error("Error fetching stores, using sample data:",n),t(N)}finally{i(!1)}})()},[]);const g=l.useMemo(()=>s.filter(a=>{var x,h;const n=a.name.toLowerCase().includes(r.toLowerCase())||((x=a.description)==null?void 0:x.toLowerCase().includes(r.toLowerCase()))||((h=a.address)==null?void 0:h.toLowerCase().includes(r.toLowerCase())),d=c==="Todos"||a.category===c;return n&&d}),[s,r,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[e.jsx("title",{children:"Servicios y Negocios | MiOriente"}),e.jsx("meta",{name:"description",content:"Encuentra los mejores restaurantes, tiendas y servicios en Marinilla y el Oriente Antioqueño."})]}),e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[e.jsx(D,{title:"Directorio de Servicios",description:"Lo que necesitas, cuando lo necesitas. Apoya el comercio local.",backgroundImage:"https://images.unsplash.com/photo-1556742502-ec7c0e9f34b1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10",children:e.jsx(y,{className:"p-4 shadow-lg border-none bg-white/95 backdrop-blur",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-grow w-full",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(E,{placeholder:"Buscar restaurantes, farmacias, tiendas...",className:"pl-9 bg-slate-50 border-slate-200",value:r,onChange:a=>m(a.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[e.jsx(o,{variant:c==="Todos"?"default":"outline",size:"sm",onClick:()=>u("Todos"),className:"whitespace-nowrap",children:"Todos"}),q.map(a=>e.jsx(o,{variant:c===a?"default":"outline",size:"sm",onClick:()=>u(a),className:"whitespace-nowrap",children:a},a))]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:p?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>e.jsx("div",{className:"h-80 bg-slate-200 rounded-xl animate-pulse"},a))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[g.length," Resultados"]}),e.jsxs(o,{variant:"ghost",size:"sm",className:"text-slate-500",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Más Filtros"]})]}),e.jsx(k,{mode:"popLayout",children:g.length>0?e.jsx(v.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(a=>e.jsx(G,{store:a},a.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx(b,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No encontramos lo que buscas"}),e.jsx("p",{className:"text-slate-500",children:"Intenta cambiar los términos de búsqueda o la categoría."}),e.jsx(o,{variant:"link",onClick:()=>{m(""),u("Todos")},className:"mt-2",children:"Limpiar filtros"})]})})]})})]})]})};export{te as default};
