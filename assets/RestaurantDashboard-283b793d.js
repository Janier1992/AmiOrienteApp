import{f as g,e as m,v as x,r as f,j as a,B as y,t as u,R as c,_ as d}from"./index-4020e339.js";import{BulkUploadTab as _}from"./BulkUploadTab-c21a8eac.js";import{L as T,B as j}from"./BaseStoreDashboard-0e39fc73.js";import{C as w,a as v,b as E,c as C}from"./card-cc9cfd5e.js";import{B as L}from"./badge-54788017.js";import{C as R,R as S}from"./RestaurantMenuView-fbfc9608.js";import{U as D}from"./utensils-crossed-39989e4e.js";import{U as N}from"./upload-c1efbb4a.js";import{D as A,S as I}from"./settings-3a739b87.js";import{U as O}from"./users-dec98a74.js";import"./circle-alert-dc75c245.js";import"./Helmet-966781f7.js";import"./log-out-30241d86.js";import"./index-a6eb7b0d.js";import"./useStoreDashboard-092a1cc0.js";import"./triangle-alert-30e3235d.js";import"./input-72252c3d.js";import"./select-31cdb233.js";import"./check-8b5d22b0.js";import"./dialog-d2829896.js";import"./label-dfea19c8.js";import"./textarea-6e954f6a.js";import"./switch-8c959075.js";import"./index-cb56a7ed.js";import"./search-90c48c54.js";import"./pencil-5a5480e6.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],k=g("layout-grid",P),p={async getTables(e){const{data:r,error:t}=await m.from("restaurant_tables").select("*").eq("store_id",e).order("number");if(t)throw t;return r},async createTable(e){const{data:r,error:t}=await m.from("restaurant_tables").insert(e).select().single();if(t)throw t;return r},async updateTableStatus(e,r){const{error:t}=await m.from("restaurant_tables").update({status:r}).eq("id",e);if(t)throw t}},z=x((e,r)=>({tables:[],isLoadingTables:!1,error:null,fetchTables:async t=>{e({isLoadingTables:!0,error:null});try{const s=await p.getTables(t);e({tables:s})}catch(s){e({error:s.message})}finally{e({isLoadingTables:!1})}},addTable:async t=>{try{const s=await p.createTable(t);return e(n=>({tables:[...n.tables,s]})),s}catch(s){throw s}},toggleTableStatus:async(t,s)=>{const n=s==="available"?"occupied":"available",l=r().tables;e({tables:l.map(o=>o.id===t?{...o,status:n}:o)});try{await p.updateTableStatus(t,n)}catch(o){throw e({tables:l}),o}}})),B=({storeId:e})=>{const{tables:r,fetchTables:t,addTable:s,toggleTableStatus:n,isLoadingTables:l,error:o}=z();f.useEffect(()=>{e&&t(e)},[e,t]);const b=async()=>{const i=prompt("Número de mesa:");if(i)try{await s({store_id:e,number:i,capacity:4}),u({title:"Mesa agregada"})}catch(h){u({title:"Error",description:h.message,variant:"destructive"})}};return l&&r.length===0?a.jsx("div",{className:"p-4",children:"Cargando mesas..."}):a.jsxs(w,{children:[a.jsxs(v,{className:"flex flex-row items-center justify-between",children:[a.jsx(E,{children:"Gestión de Mesas"}),a.jsx(y,{onClick:b,children:"+ Agregar Mesa"})]}),a.jsxs(C,{children:[o&&a.jsxs("p",{className:"text-red-500 mb-4",children:["Error: ",o]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[r.map(i=>a.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${i.status==="occupied"?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,onClick:()=>n(i.id,i.status),children:[a.jsx("div",{className:"text-2xl font-bold text-center mb-2",children:i.number}),a.jsx(L,{variant:i.status==="occupied"?"destructive":"default",className:"w-full justify-center",children:i.status==="occupied"?"Ocupada":"Libre"})]},i.id)),r.length===0&&!l&&a.jsx("p",{className:"col-span-full text-center text-gray-500",children:"Agrega mesas para gestionarlas aquí."})]})]})]})},M=c.lazy(()=>d(()=>import("./OverviewTab-30ffe364.js"),["assets/OverviewTab-30ffe364.js","assets/index-4020e339.js","assets/index-cf56b884.css","assets/card-cc9cfd5e.js","assets/useStoreDashboard-092a1cc0.js","assets/index-a6eb7b0d.js","assets/triangle-alert-30e3235d.js","assets/settings-3a739b87.js","assets/package-1cc03608.js","assets/trending-up-36728e9d.js"])),U=c.lazy(()=>d(()=>import("./OrdersTab-e6190215.js"),["assets/OrdersTab-e6190215.js","assets/index-4020e339.js","assets/index-cf56b884.css","assets/card-cc9cfd5e.js","assets/badge-54788017.js","assets/dialog-d2829896.js","assets/select-31cdb233.js","assets/check-8b5d22b0.js","assets/useStoreDashboard-092a1cc0.js","assets/index-a6eb7b0d.js","assets/triangle-alert-30e3235d.js","assets/package-1cc03608.js","assets/clock-f4d06a64.js","assets/truck-45a9dcb6.js","assets/map-pin-865d1b33.js"])),V=c.lazy(()=>d(()=>import("./ProfileTab-bdc8470c.js"),["assets/ProfileTab-bdc8470c.js","assets/index-4020e339.js","assets/index-cf56b884.css","assets/input-72252c3d.js","assets/label-dfea19c8.js","assets/card-cc9cfd5e.js","assets/useStoreDashboard-092a1cc0.js"])),q=c.lazy(()=>d(()=>import("./AdminTab-a5eee867.js"),["assets/AdminTab-a5eee867.js","assets/index-4020e339.js","assets/index-cf56b884.css","assets/card-cc9cfd5e.js","assets/user-plus-36b776d9.js","assets/users-dec98a74.js"])),F=c.lazy(()=>d(()=>import("./FinancialsTab-ae36bb23.js"),["assets/FinancialsTab-ae36bb23.js","assets/index-4020e339.js","assets/index-cf56b884.css","assets/card-cc9cfd5e.js","assets/useStoreDashboard-092a1cc0.js","assets/index-a6eb7b0d.js","assets/triangle-alert-30e3235d.js","assets/settings-3a739b87.js","assets/trending-up-36728e9d.js","assets/credit-card-bea94bde.js","assets/circle-alert-dc75c245.js"])),ge=({store:e})=>{const r=[{path:"",label:"Resumen",icon:T,element:a.jsx(M,{storeId:e.id})},{path:"pedidos",label:"Cocina y Pedidos",icon:R,element:a.jsx(U,{storeId:e.id})},{path:"menu",label:"Menú Digital",icon:D,element:a.jsx(S,{})},{path:"importar",label:"Importar",icon:N,element:a.jsx(_,{storeId:e.id})},{path:"mesas",label:"Mesas",icon:k,element:a.jsx(B,{storeId:e.id})},{path:"finanzas",label:"Finanzas",icon:A,element:a.jsx(F,{storeId:e.id})},{path:"equipo",label:"Equipo",icon:O,element:a.jsx(q,{storeId:e.id})},{path:"configuracion",label:"Configuración",icon:I,element:a.jsx(V,{})}];return a.jsx(j,{store:e,tabs:r})};export{ge as default};
