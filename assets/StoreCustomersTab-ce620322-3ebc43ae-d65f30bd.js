import{d as t,y as e,j as m,h as u,f as h,p,a as w,J as f,m as j,b as C,g as D,X as S,E as x}from"./index-8e3c4911.js";import{a as d}from"./input-977568de-bea10295-4adb3258.js";import{u as o}from"./label-6ced007b-31f64b09-71156226.js";import{u as g}from"./useStoreDashboard-6cfa5bdd-a014cfe4-c8bff8db.js";import{d as _}from"./badge-34bdff7c-b2c90fce-efd43af8.js";import{t as A}from"./users-93d0d9a2-82ed9403-42cfbbc5.js";const z=()=>{const{store:s,updateStoreSettings:l}=g(),[a,n]=t.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||""}),[r,c]=t.useState(!1),b=async i=>{i.preventDefault(),c(!0);try{await l(a),x({title:"Configuración guardada"})}catch{x({title:"Error",description:"No se pudo actualizar.",variant:"destructive"})}finally{c(!1)}};return e.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"})," Información del Negocio"]}),e.jsx(f,{children:"Detalles públicos de tu tienda en MiOriente"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Nombre del Negocio"}),e.jsx(d,{value:a.name,onChange:i=>n({...a,name:i.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Descripción"}),e.jsx(d,{value:a.description,onChange:i=>n({...a,description:i.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Teléfono de Contacto"}),e.jsx(d,{value:a.phone,onChange:i=>n({...a,phone:i.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Dirección Física"}),e.jsx(d,{value:a.address,onChange:i=>n({...a,address:i.target.value})})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs(C,{type:"submit",disabled:r,children:[r&&e.jsx(D,{className:"animate-spin mr-2 h-4 w-4"}),"Guardar Cambios"]})})]})})]})})},N=t.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l}));N.displayName="Avatar";const v=t.forwardRef(({className:s,...l},a)=>e.jsx("img",{ref:a,className:m("aspect-square h-full w-full",s),...l}));v.displayName="AvatarImage";const y=t.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...l}));y.displayName="AvatarFallback";const I=()=>{const{store:s,customers:l,fetchCustomers:a,isLoadingCustomers:n}=g();return t.useEffect(()=>{s!=null&&s.id&&a(s.id)},[s==null?void 0:s.id]),n?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando clientes..."}):e.jsx("div",{className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"})," Mis Clientes"]}),e.jsx(f,{children:"Personas que han realizado compras en tu negocio."})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.map(r=>{var c;return e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsxs(N,{className:"h-12 w-12",children:[e.jsx(v,{src:r.avatar_url}),e.jsx(y,{children:((c=r.full_name)==null?void 0:c.substring(0,2).toUpperCase())||"NA"})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:r.full_name||"Desconocido"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(_,{variant:"secondary",className:"text-xs font-normal",children:[e.jsx(S,{className:"h-3 w-3 mr-1"})," ",r.total_orders," pedidos"]}),e.jsxs("span",{className:"text-xs font-bold text-green-600",children:["$",Number(r.total_spent).toLocaleString()]})]})]})]},r.id)}),l.length===0&&e.jsx("p",{className:"col-span-full text-center text-muted-foreground py-8",children:"Aún no tienes clientes registrados."})]})})]})})};export{z as E,I as F};
